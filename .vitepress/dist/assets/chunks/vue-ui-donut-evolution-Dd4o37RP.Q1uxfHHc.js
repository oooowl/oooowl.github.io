import{h as x,p,v as Ke,q as _e,o as a,c as u,b as H,e as d,aj as qe,w as _,r as T,ak as ae,al as ue,k as v,n as P,N as oe,G as Qe,j as c,F as m,C as k,t as b,W as Je,a as Pe,P as Ze}from"./framework.BaNfDZ-f.js";import{o as el,X as ll,K as U,q as tl,L as Ie,G as al,R as ul,e as Y,a as ol,m as sl,j as se,I as Te,g as re,Q as rl,c as M,i as nl,n as ne,b as K,B as We,z as q,P as He,r as Ee,N as il,O as vl}from"../chart.md.hi_nZSnT.js";import{x as cl}from"./Title-DYNLqCCT.D6xZGHSM.js";import{s as dl,i as yl}from"./usePrinter-8ofTb2MJ.pt_J2AaR.js";import{W as hl}from"./DataTable-DL2agEJ3.DwhyhpBD.js";import{C as gl}from"./Legend-DXLiSLHd.5wpQgPWV.js";import fl from"./vue-ui-skeleton-B2sRnIXX.C3JvNOY7.js";import{_ as bl}from"./Slicer-BZfUZr1J.DTx2MfEZ.js";import xl from"./vue-ui-accordion-D_1fE5EF.ggAyum2g.js";import{c as Oe}from"./useNestedProp-S1UXxUgm.CErBICdk.js";import{p as pl}from"./PackageVersion-DtnhR89q.DeJ10Meb.js";import{s as ml}from"./vue-data-ui-Cp7bO_tj.DKBrIOIj.js";import"./Shape-CO_Ak9Zm.UkrUmJI7.js";import"./useResponsive-NZB-WLRF.DbXjWqi_.js";const kl=["id"],Cl=["xmlns","viewBox"],wl=["id"],$l=["stop-color"],Ll=["stop-color"],zl=["id"],Nl=["stop-color"],Al=["stop-color"],Sl=["stop-color"],Fl={key:0},_l=["x1","x2","y1","y2","stroke","stroke-width"],Pl=["x1","x2","y1","y2","stroke","stroke-width"],Il={key:0},Tl=["x1","x2","y1","y2","stroke","stroke-width"],Wl=["x1","x2","y1","y2","stroke","stroke-width"],Hl=["x","y","font-size","fill","font-weight"],El=["text-anchor","font-size","fill","transform"],Ol=["x1","y1","x2","y2","stroke","stroke-width"],Rl={key:1},Vl=["cx","cy","r","fill"],Gl={key:0},Bl={key:0},Ml=["d","stroke"],Xl=["text-anchor","x","y","fill"],jl=["cx","cy","r","fill"],Dl={key:0},Ul=["cx","cy","fill"],Yl={key:1},Kl=["d","fill","stroke"],ql={key:2},Ql=["d","fill","stroke"],Jl=["x","y","font-size","fill"],Zl=["x","y","width","fill","onClick"],et=["x","y","width","height","onMouseenter","onClick"],lt={key:3,"data-cy-zoom":"",class:"vue-ui-donut-evolution-dialog"},tt=["x","y","width","height","fill"],at=["x1","y1","x2","y2","stroke"],ut=["x1","y2","x2","y1","stroke"],ot=["onKeypress","cx","cy","r"],st=["d","stroke"],rt=["cx","cy","r","fill"],nt=["d","fill","stroke"],it={class:"vue-ui-donut-evolution-focus"},vt=["text-anchor","x","y","fill"],ct=["cx","cy","r","fill"],dt=["cx","cy","r","fill"],yt=["x","y","fill"],ht=["x","y","font-size","fill"],gt={key:3,class:"vue-data-ui-watermark"},ft=["onClick"],bt={key:0},xt={key:1},pt={key:0},mt={key:1},kt={__name:"vue-ui-donut-evolution",props:{config:{type:Object,default(){return{}}},dataset:{type:Array,default(){return[]}}},emits:["selectLegend"],setup(Re,{expose:Ve,emit:ie}){const z=Re,{vue_ui_donut_evolution:Ge}=el(),X=x(()=>!!z.dataset&&z.dataset.length),y=p({start:0,end:Math.max(...z.dataset.map(t=>t.values.length))});function ve(){y.value={start:0,end:G.value},he.value+=1}Ke(()=>{ce()});function ce(){ll(z.dataset)?U({componentName:"VueUiDonutEvolution",type:"dataset"}):z.dataset.length&&z.dataset.forEach((t,i)=>{tl({datasetObject:t,requiredAttributes:["name","values"]}).forEach(l=>{U({componentName:"VueUiDonutEvolution",type:"datasetSerieAttribute",property:l,index:i})})})}const W=p(Ie()),C=p([]),f=p(null),Q=p(null),N=p(!1),A=p(null),de=p(null),ye=p(0),he=p(0),ge=p(0),fe=p(0),be=p(0),e=x({get:()=>xe(),set:t=>t});function xe(){const t=Oe({userConfig:z.config,defaultConfig:Ge});return t.theme?{...Oe({userConfig:al.vue_ui_donut_evolution[t.theme]||z.config,defaultConfig:t}),customPalette:ul[t.theme]||Y}:t}_e(()=>z.config,t=>{e.value=xe(),ce(),ge.value+=1,fe.value+=1,be.value+=1},{deep:!0}),_e(()=>z.dataset,t=>{ve()},{deep:!0});const{isPrinting:pe,isImaging:me,generatePdf:ke,generateImage:Ce}=dl({elementId:W.value,fileName:e.value.style.chart.title.text||"vue-ui-donut-evolution"}),Be=x(()=>ol(e.value.customPalette)),j=p({showTable:e.value.table.show}),s=x(()=>({top:e.value.style.chart.layout.padding.top,right:e.value.style.chart.layout.padding.right,bottom:e.value.style.chart.layout.padding.bottom,left:e.value.style.chart.layout.padding.left})),r=x(()=>{const t=e.value.style.chart.layout.height,i=e.value.style.chart.layout.width,l=t-s.value.top-s.value.bottom,n=i-s.value.left-s.value.right;return{absoluteHeight:t,absoluteWidth:i,centerX:s.value.left+n/2,centerY:s.value.top+l/2,height:l,width:n}}),I=x(()=>(z.dataset.forEach((t,i)=>{[null,void 0].includes(t.name)&&U({componentName:"VueUiDonutEvolution",type:"datasetSerieAttribute",property:"name",index:i}),[null,void 0].includes(t.values)&&U({componentName:"VueUiDonutEvolution",type:"datasetSerieAttribute",property:"values",index:i})}),z.dataset.map((t,i)=>({...t,values:sl(t.values),color:se(t.color)||Be.value[i]||Y[i]||Y[i%Y.length],length:(t.values||[]).length,uid:Ie()})))),V=x(()=>I.value.filter(t=>!C.value.includes(t.uid)).map(t=>({...t,values:t.values.filter((i,l)=>l>=y.value.start&&l<=y.value.end)}))),G=x(()=>Math.max(...V.value.map(t=>t.length))),$=x(()=>r.value.width/(y.value.end-y.value.start)),w=x(()=>{const t=[];for(let o=0;o<y.value.end-y.value.start;o+=1){const g=V.value.map(F=>F.values[o]??null),h=g.filter(F=>[void 0,null].includes(F)).length===g.length,S=g.reduce((F,L)=>F+L,0),te=g.map(F=>F/S),R=s.value.left+$.value*o+$.value/2;t.push({index:o,percentages:te,subtotal:h||S<0?null:S,values:g,x:R})}const i=0,l=Math.max(...t.map(o=>o.subtotal)),n=t.length===1?l*2:l;return t.map((o,g)=>{const h=$.value/2*.7,S=h>r.value.width/16?r.value.width/16:h,te=f.value===o.index?r.value.width/16:S,R=t.length>4?h*2:h*2>$.value/2*.7?$.value/2*.7:h*2,F=r.value.absoluteHeight-s.value.bottom-r.value.height*o.subtotal/Te(i,n,e.value.style.chart.layout.grid.yAxis.dataLabels.steps).max;return{...o,y:F,radius:S,activeRadius:te,hoverRadius:R,donut:re({series:V.value.map((L,Fe)=>({color:L.color,name:L.name,value:L.values[g]??0}))},o.x,F,S,S,1.99999,2,1,360,105.25,S/2),donutHover:re({series:V.value.map((L,Fe)=>({color:L.color,name:L.name,value:L.values[g]??0}))},o.x,F,R,R,1.99999,2,1,360,105.25,R/2),donutFocus:re({series:V.value.map((L,Fe)=>({color:L.color,name:L.name,value:L.values[g]??0}))},r.value.centerX,r.value.centerY,r.value.height/3.6,r.value.height/3.6,1.99999,2,1,360,105.25,r.value.height/6)}})});function D(t,i,l){return ne(e.value.style.chart.layout.dataLabels.formatter,t,K({p:e.value.style.chart.layout.dataLabels.prefix,v:t,s:e.value.style.chart.layout.dataLabels.suffix,r:e.value.style.chart.layout.dataLabels.rounding}),{datapoint:i,index:l})}const J=x(()=>({max:Math.max(...w.value.map(t=>t.subtotal)),min:0})),E=x(()=>{const t=w.value.length===1?J.value.max*2:J.value.max;return Te(J.value.min,t,e.value.style.chart.layout.grid.yAxis.dataLabels.steps)});function Me(t){return t/E.value.max}const Xe=x(()=>E.value.ticks.map(t=>({y:r.value.absoluteHeight-s.value.bottom-r.value.height*Me(t),value:t})));function we(t,i){return isNaN(t.value/Ee(i,"value"))?0:(t.value/Ee(i,"value")*100).toFixed(0)+"%"}function $e(){N.value||(f.value=null,Q.value=null)}function je(t){N.value||(f.value=t.index,Q.value=t)}const Z=p(null);function ee(t,i){t.subtotal&&(Q.value=null,f.value=null,N.value=!0,A.value=t,[null,void 0].includes(i)||(Z.value=i))}function Le(){A.value=null,N.value=!1,Z.value=null}const ze=x(()=>I.value.map((t,i)=>({name:t.name,value:t.values.slice(y.value.start,y.value.end).reduce((l,n)=>l+n,0),shape:"circle",uid:t.uid,color:t.color})).sort((t,i)=>i.value-t.value).map(t=>({...t,opacity:C.value.includes(t.uid)?.5:1,segregate:()=>le(t.uid),isSegregated:C.value.includes(t.uid)}))),Ne=x(()=>w.value.map(t=>t.subtotal).reduce((t,i)=>t+i,0)),De=x(()=>({cy:"donut-div-legend",backgroundColor:e.value.style.chart.legend.backgroundColor,color:e.value.style.chart.legend.color,fontSize:e.value.style.chart.legend.fontSize,paddingBottom:12,fontWeight:e.value.style.chart.legend.bold?"bold":""}));function le(t){if(C.value.includes(t))C.value=C.value.filter(i=>i!==t),ie("selectLegend",null);else{if(C.value.length===I.value.length-1)return;C.value.push(t),ie("selectLegend",I.value.find(i=>i.uid===t))}A.value&&ee(w.value.find((i,l)=>l===Z.value))}const O=x(()=>{const t=[""].concat(I.value.filter(o=>!C.value.includes(o.uid)).map(o=>({name:o.name,color:o.color}))).concat(["Î£"]);let i=[];for(let o=0;o<G.value;o+=1){const g=I.value.filter(h=>!C.value.includes(h.uid)).map(h=>h.values[o]??0).reduce((h,S)=>h+S,0);i.push([e.value.style.chart.layout.grid.xAxis.dataLabels.values[o]??"-"].concat(I.value.filter(h=>!C.value.includes(h.uid)).map(h=>({value:h.values[o]??0,percentage:h.values[o]?h.values[o]/g*100:0}))).concat([`${e.value.style.chart.layout.dataLabels.prefix}${Number(g.toFixed(e.value.table.td.roundingValue))}${e.value.style.chart.layout.dataLabels.suffix}`]))}const l={th:{backgroundColor:e.value.table.th.backgroundColor,color:e.value.table.th.color,outline:e.value.table.th.outline},td:{backgroundColor:e.value.table.td.backgroundColor,color:e.value.table.td.color,outline:e.value.table.td.outline},breakpoint:e.value.table.responsiveBreakpoint},n=[e.value.table.columnNames.period].concat(I.value.filter(o=>!C.value.includes(o.uid)).map(o=>o.name)).concat(e.value.table.columnNames.total);return{head:t,body:i,config:l,colNames:n}});function Ue(){return I.value}function Ae(){Ze(()=>{const t=[[e.value.style.chart.title.text],[e.value.style.chart.title.subtitle.text],[""]],i=[...O.value.head.map(g=>g.name??g)],l=[...O.value.body.map(g=>g.map(h=>h.value??h))],n=t.concat([i]).concat(l),o=il(n);vl({csvContent:o,title:e.value.style.chart.title.text||"vue-ui-donut-evolution"})})}const B=p(!1);function Ye(t){B.value=t,ye.value+=1}function Se(){j.value.showTable=!j.value.showTable}return Ve({getData:Ue,generatePdf:ke,generateCsv:Ae,generateImage:Ce,toggleTable:Se}),(t,i)=>(a(),u("div",{ref_key:"donutEvolutionChart",ref:de,class:P(`vue-ui-donut-evolution ${B.value?"vue-data-ui-wrapper-fullscreen":""} ${e.value.useCssAnimation?"":"vue-ui-dna"}`),style:oe(`font-family:${e.value.style.fontFamily};width:100%; text-align:center;${e.value.style.chart.title.text?"":"padding-top:36px"};background:${e.value.style.chart.backgroundColor}`),id:W.value},[e.value.style.chart.title.text?(a(),u("div",{key:0,style:"width:100%;background:transparent;padding-bottom:24px",onMouseleave:$e},[(a(),H(cl,{key:`title_${ge.value}`,config:{title:{cy:"donut-evolution-div-title",...e.value.style.chart.title},subtitle:{cy:"donut-evolution-div-subtitle",...e.value.style.chart.title.subtitle}}},null,8,["config"]))],32)):d("",!0),e.value.userOptions.show&&X.value?(a(),H(yl,{ref:"details",key:`user_options_${ye.value}`,backgroundColor:e.value.style.chart.backgroundColor,color:e.value.style.chart.color,isPrinting:v(pe),isImaging:v(me),uid:W.value,hasPdf:e.value.userOptions.buttons.pdf,hasImg:e.value.userOptions.buttons.img,hasXls:e.value.userOptions.buttons.csv,hasTable:e.value.userOptions.buttons.table,hasFullscreen:e.value.userOptions.buttons.fullscreen,isFullscreen:B.value,titles:{...e.value.userOptions.buttonTitles},chartElement:de.value,position:e.value.userOptions.position,onToggleFullscreen:Ye,onGeneratePdf:v(ke),onGenerateCsv:Ae,onGenerateImage:v(Ce),onToggleTable:Se},qe({_:2},[t.$slots.optionPdf?{name:"optionPdf",fn:_(()=>[T(t.$slots,"optionPdf",{},void 0,!0)]),key:"0"}:void 0,t.$slots.optionCsv?{name:"optionCsv",fn:_(()=>[T(t.$slots,"optionCsv",{},void 0,!0)]),key:"1"}:void 0,t.$slots.optionImg?{name:"optionImg",fn:_(()=>[T(t.$slots,"optionImg",{},void 0,!0)]),key:"2"}:void 0,t.$slots.optionTable?{name:"optionTable",fn:_(()=>[T(t.$slots,"optionTable",{},void 0,!0)]),key:"3"}:void 0,t.$slots.optionFullscreen?{name:"optionFullscreen",fn:_(({toggleFullscreen:l,isFullscreen:n})=>[T(t.$slots,"optionFullscreen",ae(ue({toggleFullscreen:l,isFullscreen:n})),void 0,!0)]),key:"4"}:void 0]),1032,["backgroundColor","color","isPrinting","isImaging","uid","hasPdf","hasImg","hasXls","hasTable","hasFullscreen","isFullscreen","titles","chartElement","position","onGeneratePdf","onGenerateImage"])):d("",!0),X.value?(a(),u("svg",{key:2,xmlns:v(rl),class:P({"vue-data-ui-fullscreen--on":B.value,"vue-data-ui-fulscreen--off":!B.value}),viewBox:`0 0 ${r.value.absoluteWidth} ${r.value.absoluteHeight}`,style:oe(`max-width:100%; overflow: visible; background:transparent;color:${e.value.style.chart.color}`)},[Qe(pl),c("defs",null,[c("linearGradient",{id:`hover_${W.value}`,x1:"0%",y1:"0%",x2:"0%",y2:"100%"},[c("stop",{offset:"0%","stop-color":v(M)(e.value.style.chart.backgroundColor,e.value.style.chart.layout.highlighter.opacity)},null,8,$l),c("stop",{offset:"100%","stop-color":v(M)(e.value.style.chart.layout.highlighter.color,e.value.style.chart.layout.highlighter.opacity)},null,8,Ll)],8,wl),c("radialGradient",{id:`focus_${W.value}`},[c("stop",{offset:"0%","stop-color":v(M)(v(se)(e.value.style.chart.backgroundColor),0)},null,8,Nl),c("stop",{offset:"77%","stop-color":v(M)("#FFFFFF",30)},null,8,Al),c("stop",{offset:"100%","stop-color":v(M)(v(se)(e.value.style.chart.backgroundColor),0)},null,8,Sl)],8,zl)]),e.value.style.chart.layout.grid.show?(a(),u("g",Fl,[c("line",{x1:s.value.left,x2:s.value.left,y1:s.value.top,y2:s.value.top+r.value.height,stroke:e.value.style.chart.layout.grid.stroke,"stroke-width":e.value.style.chart.layout.grid.strokeWidth,"stroke-linecap":"round"},null,8,_l),c("line",{x1:s.value.left,x2:r.value.absoluteWidth-s.value.right,y1:r.value.absoluteHeight-s.value.bottom,y2:r.value.absoluteHeight-s.value.bottom,stroke:e.value.style.chart.layout.grid.stroke,"stroke-width":e.value.style.chart.layout.grid.strokeWidth,"stroke-linecap":"round"},null,8,Pl),e.value.style.chart.layout.grid.showVerticalLines?(a(),u("g",Il,[(a(!0),u(m,null,k(y.value.end-y.value.start,(l,n)=>(a(),u("line",{x1:s.value.left+(n+1)*$.value,x2:s.value.left+(n+1)*$.value,y1:s.value.top,y2:r.value.absoluteHeight-s.value.bottom,stroke:e.value.style.chart.layout.grid.stroke,"stroke-width":e.value.style.chart.layout.grid.strokeWidth,"stroke-linecap":"round"},null,8,Tl))),256))])):d("",!0)])):d("",!0),e.value.style.chart.layout.grid.yAxis.dataLabels.show?(a(),u("g",{key:1,class:P({"donut-opacity":!0,"donut-behind":f.value!==null||N.value})},[(a(!0),u(m,null,k(Xe.value,(l,n)=>(a(),u("g",null,[l.value>=E.value.min&&l.value<=E.value.max?(a(),u("line",{key:0,x1:s.value.left,x2:s.value.left-5,y1:l.y,y2:l.y,stroke:e.value.style.chart.layout.grid.stroke,"stroke-width":e.value.style.chart.layout.grid.strokeWidth},null,8,Wl)):d("",!0),l.value>=E.value.min&&l.value<=E.value.max?(a(),u("text",{key:1,x:s.value.left-8+e.value.style.chart.layout.grid.yAxis.dataLabels.offsetX,y:l.y+e.value.style.chart.layout.grid.yAxis.dataLabels.fontSize/3,"font-size":e.value.style.chart.layout.grid.yAxis.dataLabels.fontSize,"text-anchor":"end",fill:e.value.style.chart.layout.grid.yAxis.dataLabels.color,"font-weight":e.value.style.chart.layout.grid.yAxis.dataLabels.bold?"bold":"normal"},b(v(nl)(l.value)?v(ne)(e.value.style.chart.layout.dataLabels.formatter,l.value,v(K)({p:e.value.style.chart.layout.dataLabels.prefix,v:l.value,s:e.value.style.chart.layout.dataLabels.suffix,r:e.value.style.chart.layout.grid.yAxis.dataLabels.roundingValue}),{datapoint:l,seriesIndex:n}):""),9,Hl)):d("",!0)]))),256))],2)):d("",!0),e.value.style.chart.layout.grid.xAxis.dataLabels.show?(a(),u("g",{key:2,class:P({"donut-opacity":!0,"donut-behind":N.value})},[(a(!0),u(m,null,k(y.value.end-y.value.start,(l,n)=>(a(),u("g",null,[e.value.style.chart.layout.grid.xAxis.dataLabels.showOnlyFirstAndLast&&(n===0||n===G.value-1)||!e.value.style.chart.layout.grid.xAxis.dataLabels.showOnlyFirstAndLast?(a(),u("text",{key:0,"text-anchor":e.value.style.chart.layout.grid.xAxis.dataLabels.rotation>0?"start":e.value.style.chart.layout.grid.xAxis.dataLabels.rotation<0?"end":"middle","font-size":e.value.style.chart.layout.grid.xAxis.dataLabels.fontSize,fill:e.value.style.chart.layout.grid.xAxis.dataLabels.color,transform:`translate(${s.value.left+$.value*n+$.value/2}, ${e.value.style.chart.layout.grid.xAxis.dataLabels.offsetY+r.value.absoluteHeight-s.value.bottom+e.value.style.chart.layout.grid.xAxis.dataLabels.fontSize*2}), rotate(${e.value.style.chart.layout.grid.xAxis.dataLabels.rotation})`},b(e.value.style.chart.layout.grid.xAxis.dataLabels.values[Number(n)+Number(y.value.start)]??""),9,El)):d("",!0)]))),256))],2)):d("",!0),(a(!0),u(m,null,k(w.value,(l,n)=>(a(),u("g",null,[e.value.style.chart.layout.line.show&&n<w.value.length-1&&![l.subtotal,w.value[n+1].subtotal].includes(null)?(a(),u("line",{key:0,class:P({"donut-opacity":!0,"donut-behind":f.value!==null||N.value}),x1:l.x,y1:l.y,x2:w.value[n+1].x,y2:w.value[n+1].y,stroke:e.value.style.chart.layout.line.stroke,"stroke-width":e.value.style.chart.layout.line.strokeWidth,"stroke-linecap":"round","stroke-linejoin":"round"},null,10,Ol)):d("",!0),l.subtotal!==null?(a(),u("g",Rl,[l.subtotal?(a(),u("circle",{key:0,cx:l.x,cy:l.y,r:l.activeRadius,fill:e.value.style.chart.backgroundColor},null,8,Vl)):d("",!0)])):d("",!0)]))),256)),(a(!0),u(m,null,k(w.value,(l,n)=>(a(),u("g",{class:P({"donut-opacity":!0,"donut-behind":n!==f.value&&f.value!==null||N.value})},[l.subtotal?(a(),u("g",Gl,[f.value!==null&&f.value===n?(a(),u("g",Bl,[(a(!0),u(m,null,k(l.donutHover,o=>(a(),u("g",null,[c("path",{d:v(We)(o,{x:o.center.endX,y:o.center.endY},12,12,{x:l.x,y:l.y},!0,20),stroke:o.color,"stroke-width":"1","stroke-linecap":"round","stroke-linejoin":"round",fill:"none"},null,8,Ml)]))),256)),(a(!0),u(m,null,k(l.donutHover,(o,g)=>(a(),u("g",null,[c("text",{"data-cy-hover-label":"","text-anchor":v(q)(o,!0,0).anchor,x:v(q)(o,!0,3).x,y:v(He)(o),fill:e.value.style.chart.layout.grid.yAxis.dataLabels.color,"font-size":8,"font-weight":"bold"},b(o.name)+": "+b(we(o,l.donut))+" ("+b(o.value===null?"-":D(o.value,o,g))+") ",9,Xl)]))),256)),c("g",null,[c("circle",{cx:l.x,cy:l.y,r:l.hoverRadius,fill:e.value.style.chart.backgroundColor},null,8,jl)])])):d("",!0)])):d("",!0)],2))),256)),(a(!0),u(m,null,k(w.value,(l,n)=>(a(),u("g",{class:P({"donut-opacity":!0,"donut-behind":n!==f.value&&f.value!==null||N.value})},[l.subtotal!==null?(a(),u("g",Dl,[l.subtotal===0?(a(),u("circle",{key:0,cx:l.x,cy:l.y,r:3,fill:e.value.style.chart.color},null,8,Ul)):f.value!==null&&f.value===n?(a(),u("g",Yl,[(a(!0),u(m,null,k(l.donutHover,(o,g)=>(a(),u("path",{d:o.arcSlice,fill:`${o.color}`,"stroke-width":1,stroke:e.value.style.chart.backgroundColor},null,8,Kl))),256))])):(a(),u("g",ql,[(a(!0),u(m,null,k(l.donut,(o,g)=>(a(),u("path",{d:o.arcSlice,fill:`${o.color}`,"stroke-width":.5,stroke:e.value.style.chart.backgroundColor},null,8,Ql))),256))]))])):d("",!0)],2))),256)),(a(!0),u(m,null,k(w.value,(l,n)=>(a(),u("g",{class:P({"donut-opacity":!0,"donut-behind":n!==f.value&&f.value!==null||N.value})},[l.subtotal!==null&&e.value.style.chart.layout.dataLabels.show?(a(),u("text",{key:0,"text-anchor":"middle",x:l.x,y:f.value===l.index&&l.subtotal?l.y+e.value.style.chart.layout.dataLabels.fontSize/3:l.y-l.radius-e.value.style.chart.layout.dataLabels.fontSize+e.value.style.chart.layout.dataLabels.offsetY,"font-size":e.value.style.chart.layout.dataLabels.fontSize,"font-weight":"bold",fill:e.value.style.chart.layout.dataLabels.color},b(D(l.subtotal,l,n)),9,Jl)):d("",!0)],2))),256)),(a(!0),u(m,null,k(w.value,(l,n)=>(a(),u("rect",{x:s.value.left+n*$.value,y:r.value.absoluteHeight-s.value.bottom-10,width:$.value,height:10,fill:f.value===l.index?`url(#hover_${W.value})`:"transparent",onClick:o=>ee(l,n),class:P({"donut-hover":f.value===l.index&&l.subtotal})},null,10,Zl))),256)),(a(!0),u(m,null,k(w.value,(l,n)=>(a(),u("rect",{"data-cy-trap":"",x:s.value.left+n*$.value,y:s.value.top,width:$.value,height:r.value.height,fill:"transparent",onMouseenter:o=>je(l),onMouseleave:$e,onClick:o=>ee(l,n),class:P({"donut-hover":f.value===l.index&&l.subtotal})},null,42,et))),256)),N.value?(a(),u("g",lt,[c("rect",{rx:4,x:s.value.left,y:s.value.top,width:r.value.width,height:r.value.height,fill:e.value.style.chart.backgroundColor,style:{filter:"drop-shadow(0 12px 12px rgba(0,0,0,0.3))"}},null,8,tt),c("line",{"data-html2canvas-ignore":"",x1:r.value.absoluteWidth-s.value.right-15,y1:s.value.top+5,x2:r.value.absoluteWidth-s.value.right-4,y2:s.value.top+15.5,"stroke-linecap":"round",stroke:e.value.style.chart.color,"stroke-width":"1.5"},null,8,at),c("line",{"data-html2canvas-ignore":"",x1:r.value.absoluteWidth-s.value.right-15,y2:s.value.top+5,x2:r.value.absoluteWidth-s.value.right-4,y1:s.value.top+15.5,"stroke-linecap":"round",stroke:e.value.style.chart.color,"stroke-width":"1.5"},null,8,ut),c("circle",{"data-cy-close":"",onClick:Le,onKeypress:Je(Le,["enter"]),cx:r.value.absoluteWidth-s.value.right-r.value.width/40,cy:s.value.top+r.value.height/30,r:r.value.height/12,fill:"transparent",style:{cursor:"pointer"},tabindex:"0"},null,40,ot),(a(!0),u(m,null,k(A.value.donutFocus,l=>(a(),u("g",null,[c("path",{"data-cy-zoom-donut":"",d:v(We)(l,{x:r.value.centerX,y:r.value.centerY},12,12,!1,!1,15),stroke:l.color,"stroke-width":"1","stroke-linecap":"round","stroke-linejoin":"round",fill:"none",class:"vue-ui-donut-evolution-focus"},null,8,st)]))),256)),c("circle",{cx:s.value.left+r.value.width/2,cy:s.value.top+r.value.height/2,r:r.value.height/7,fill:e.value.style.chart.backgroundColor},null,8,rt),(a(!0),u(m,null,k(A.value.donutFocus,(l,n)=>(a(),u("path",{d:l.arcSlice,fill:`${l.color}`,"stroke-width":1,stroke:e.value.style.chart.backgroundColor,class:"vue-ui-donut-evolution-focus"},null,8,nt))),256)),(a(!0),u(m,null,k(A.value.donutFocus,(l,n)=>(a(),u("g",it,[c("text",{"text-anchor":v(q)(l,!0,20).anchor,x:v(q)(l,!0,10).x,y:v(He)(l),fill:e.value.style.chart.layout.grid.yAxis.dataLabels.color,"font-size":10,"font-weight":"bold"},b(l.name)+": "+b(we(l,A.value.donutFocus))+" ("+b(l.value===null?"-":D(l.value,l,n))+") ",9,vt)]))),256)),c("circle",{cx:s.value.left+r.value.width/2,cy:s.value.top+r.value.height/2,r:r.value.height/3.8,fill:`url(#focus_${W.value})`},null,8,ct),c("circle",{cx:s.value.left+r.value.width/2,cy:s.value.top+r.value.height/2,r:r.value.height/7.7,fill:e.value.style.chart.backgroundColor},null,8,dt),c("text",{"text-anchor":"middle",x:s.value.left+r.value.width/2,y:s.value.top+r.value.height/2+14/3,"font-size":14,"font-weight":"bold",fill:e.value.style.chart.layout.dataLabels.color,class:"vue-ui-donut-evolution-focus"},b(D(A.value.subtotal,A.value,null)),9,yt),e.value.style.chart.layout.grid.xAxis.dataLabels.values[A.value.index]?(a(),u("text",{key:0,x:s.value.left+6,y:s.value.top+e.value.style.chart.layout.grid.xAxis.dataLabels.fontSize*2,"font-size":e.value.style.chart.layout.grid.xAxis.dataLabels.fontSize*1.6,fill:e.value.style.chart.layout.dataLabels.color},b(e.value.style.chart.layout.grid.xAxis.dataLabels.values[Number(A.value.index)+Number(y.value.start)]),9,ht)):d("",!0)])):d("",!0),T(t.$slots,"svg",{svg:r.value},void 0,!0)],14,Cl)):d("",!0),t.$slots.watermark?(a(),u("div",gt,[T(t.$slots,"watermark",ae(ue({isPrinting:v(pe)||v(me)})),void 0,!0)])):d("",!0),X.value?d("",!0):(a(),H(fl,{key:4,config:{type:"donutEvolution",style:{backgroundColor:e.value.style.chart.backgroundColor,donutEvolution:{axis:{color:"#CCCCCC"},donuts:{color:"#CCCCCC"}}}}},null,8,["config"])),G.value>1&&e.value.style.chart.zoom.show?(a(),H(bl,{key:`slicer_${he.value}`,background:e.value.style.chart.zoom.color,borderColor:e.value.style.chart.backgroundColor,fontSize:e.value.style.chart.zoom.fontSize,useResetSlot:e.value.style.chart.zoom.useResetSlot,labelLeft:e.value.style.chart.layout.grid.xAxis.dataLabels.values[Number(y.value.start)]||"",labelRight:e.value.style.chart.layout.grid.xAxis.dataLabels.values[Number(y.value.end)-1]||"",textColor:e.value.style.chart.color,inputColor:e.value.style.chart.zoom.color,selectColor:e.value.style.chart.zoom.highlightColor,max:G.value,min:0,valueStart:y.value.start,valueEnd:y.value.end,start:y.value.start,"onUpdate:start":i[0]||(i[0]=l=>y.value.start=l),end:y.value.end,"onUpdate:end":i[1]||(i[1]=l=>y.value.end=l),onReset:ve},{"reset-action":_(({reset:l})=>[T(t.$slots,"reset-action",ae(ue({reset:l})),void 0,!0)]),_:3},8,["background","borderColor","fontSize","useResetSlot","labelLeft","labelRight","textColor","inputColor","selectColor","max","valueStart","valueEnd","start","end"])):d("",!0),e.value.style.chart.legend.show?(a(),H(gl,{key:`legend_${be.value}`,legendSet:ze.value,config:De.value,onClickMarker:i[2]||(i[2]=({legend:l})=>le(l.uid))},{item:_(({legend:l,index:n})=>[c("div",{"data-cy-legend-item":"",onClick:o=>le(l.uid),style:oe(`opacity:${C.value.includes(l.uid)?.5:1}`)},[Pe(b(l.name)+": "+b(v(ne)(e.value.style.chart.layout.dataLabels.formatter,l.value,v(K)({p:e.value.style.chart.layout.dataLabels.prefix,v:l.value,s:e.value.style.chart.layout.dataLabels.suffix,r:e.value.style.chart.legend.roundingValue}),{datapoint:l,seriesIndex:n}))+" ",1),C.value.includes(l.uid)?(a(),u("span",xt," ( - % ) ")):(a(),u("span",bt," ("+b(isNaN(l.value/Ne.value)?"-":v(K)({v:l.value/Ne.value*100,s:"%",r:e.value.style.chart.legend.roundingPercentage}))+") ",1))],12,ft)]),_:1},8,["legendSet","config"])):d("",!0),T(t.$slots,"legend",{legend:ze.value},void 0,!0),X.value?(a(),H(xl,{key:7,hideDetails:"",config:{open:j.value.showTable,maxHeight:1e4,body:{backgroundColor:e.value.style.chart.backgroundColor,color:e.value.style.chart.color},head:{backgroundColor:e.value.style.chart.backgroundColor,color:e.value.style.chart.color}}},{content:_(()=>[(a(),H(hl,{key:`table_${fe.value}`,colNames:O.value.colNames,head:O.value.head,body:O.value.body,config:O.value.config,title:`${e.value.style.chart.title.text}${e.value.style.chart.title.subtitle.text?` : ${e.value.style.chart.title.subtitle.text}`:""}`,onClose:i[3]||(i[3]=l=>j.value.showTable=!1)},{th:_(({th:l})=>[Pe(b(l.name??l),1)]),td:_(({td:l})=>[l.value===null?(a(),u("span",pt,"-")):(a(),u("b",mt,b(isNaN(l.value)?"":e.value.style.chart.layout.dataLabels.prefix)+b(!isNaN(l.value)&&l.value!==null?Number(l.value.toFixed(e.value.table.td.roundingValue)).toLocaleString():l)+b(isNaN(l.value)?"":e.value.style.chart.layout.dataLabels.suffix),1)),c("span",null,b(l.percentage&&!isNaN(l.percentage)?`(${Number(l.percentage.toFixed(e.value.table.td.roundingPercentage)).toLocaleString()}%)`:""),1)]),_:1},8,["colNames","head","body","config","title"]))]),_:1},8,["config"])):d("",!0)],14,kl))}},Ht=ml(kt,[["__scopeId","data-v-715ec8d1"]]);export{Ht as default};
