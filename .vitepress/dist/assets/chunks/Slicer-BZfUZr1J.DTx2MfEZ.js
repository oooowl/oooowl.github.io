import{ar as K,p as f,h as v,q as M,v as Y,o as p,c as h,j as i,r as ee,N as S,G as te,e as k,k as le,F as A,C as E,ao as z,aq as _,t as B,am as ae,an as ie}from"./framework.BaNfDZ-f.js";import{s as ue,u as ne}from"./vue-data-ui-Cp7bO_tj.DKBrIOIj.js";import{O as re,M as oe}from"./useResponsive-NZB-WLRF.DbXjWqi_.js";import{L as se,w as P,A as R,Q as ve}from"../chart.md.hi_nZSnT.js";const O=l=>(ae("data-v-54291cff"),l=l(),ie(),l),me={"data-html2canvas-ignore":"",style:{padding:"0 24px"}},de={class:"vue-data-ui-slicer-labels",style:{position:"relative","z-index":"1","pointer-events":"none"}},pe={key:0,style:{width:"100%",position:"relative"}},he={key:0,class:"minimap",style:{width:"100%"}},ce=["xmlns","viewBox"],fe=["id"],xe=["stop-color"],ye=O(()=>i("stop",{offset:"100%","stop-color":"transparent"},null,-1)),ge=["d","stroke"],be=["x","width","height","fill","rx"],Se=["d","fill"],ke=["x","width","height","fill"],we=["x","width","height","fill"],Ne=["d","fill"],Ce=["d","stroke"],$e=["cx","cy","stroke","fill"],Me=["cx","cy","stroke","fill"],Fe=["x1","x2","y2","stroke"],Le=["x","height","width","onMouseenter"],Ie=O(()=>i("div",{class:"slider-track"},null,-1)),Ae=["min","max"],Ee=["min","max"],ze={__name:"Slicer",props:{background:{type:String,default:"#FFFFFF"},borderColor:{type:String,default:"#FFFFFF"},fontSize:{type:Number,default:14},labelLeft:{type:String,default:""},labelRight:{type:String,default:""},textColor:{type:String,default:"#1A1A1A"},inputColor:{type:String,default:"#1A1A1A"},max:{type:Number,default:0},min:{type:Number,default:0},selectColor:{type:String,default:"#4A4A4A"},useResetSlot:{type:Boolean,default:!1},valueStart:{type:[Number,String],default:0},valueEnd:{type:[Number,String],default:0},minimap:{type:Array,default:[]},smoothMinimap:{type:Boolean,default:!1},minimapSelectedColor:{type:String,default:"#1f77b4"},minimapSelectionRadius:{type:Number,default:12},minimapLineColor:{type:String,default:"#2D353C"},minimapSelectedColorOpacity:{type:Number,default:.2},minimapSelectedIndex:{type:Number,default:null},minimapIndicatorColor:{type:String,default:"#2D353C"}},emits:["update:start","update:end","reset","trapMouse"],setup(l,{emit:x}){const e=l;K(t=>({e0176a96:D.value,"27e9d329":g.value,"22b19dda":q.value,"081f1459":l.selectColor,"12e0ab32":j.value}));const r=f(e.min),o=f(e.max),y=v(()=>!!e.minimap.length),w=f(se()),V=v(()=>{const t=e.max-e.min,u=(r.value-e.min)/t*100,n=(o.value-e.min)/t*100;return{left:`${u}%`,width:`${n-u}%`,background:e.selectColor}}),D=v(()=>e.inputColor),j=v(()=>e.background),q=v(()=>`${e.selectColor}33`),g=v(()=>e.borderColor),F=v(()=>{let t=[];for(let u=0;u<e.minimap.length;u+=1)t.push(u);return t});function L(){x("reset")}function G(){Number(r.value)>Number(o.value)-1&&(r.value=Number(o.value)-1),x("update:start",Number(r.value))}function U(){Number(o.value)<Number(r.value)+1&&(o.value=Number(r.value)+1),x("update:end",Number(o.value))}M(()=>e.min,t=>{Number(r.value)<Number(t)&&(r.value=Number(t)),Number(o.value)<Number(t)&&(o.value=Number(t))}),M(()=>e.max,t=>{Number(r.value)>Number(t)&&(r.value=Number(t)),Number(o.value)>Number(t)&&(o.value=Number(t))});const N=f(null),a=f({width:1,height:1}),I=f(null);Y(()=>{if(y.value){const t=re(()=>{const{width:u,height:n}=oe({chart:N.value});a.value.width=u,a.value.height=n-47});I.value=new ResizeObserver(t),I.value.observe(N.value)}});const s=v(()=>e.minimap.length?a.value.width/e.minimap.length:0),m=v(()=>{if(!e.minimap.length)return[];const t=Math.max(...e.minimap),u=Math.min(...e.minimap)-10,n=t-(u>0?0:u),d=e.minimap.map((J,X)=>{const H=J-u;return{x:a.value.width/e.minimap.length*X+s.value/2,y:a.value.height-H/n*(a.value.height*.9)}}),C=e.smoothMinimap?P(d):R(d),$=[...d].slice(e.valueStart,e.valueEnd),W=e.smoothMinimap?P($):R($);return{fullSet:C,selectionSet:W,sliced:$,firstPlot:d[e.valueStart],lastPlot:d[e.valueEnd-1]}}),c=v(()=>({x:s.value*r.value+s.value/2,width:a.value.width*((o.value-r.value)/e.max)-s.value})),Z=v(()=>({left:0,color:e.textColor,fontSize:`${e.fontSize}px`,top:y.value?"28px":"-28px",pointerEvents:"none"})),Q=v(()=>({right:0,color:e.textColor,fontSize:`${e.fontSize}px`,top:y.value?"28px":"-28px",direction:"rtl",pointerEvents:"none"})),b=f(e.minimapSelectedIndex);M(()=>e.minimapSelectedIndex,t=>{b.value=t+e.valueStart},{immediate:!0});function T(t){b.value=t,t>=e.valueStart&&t<e.valueEnd&&x("trapMouse",t-e.valueStart)}return(t,u)=>(p(),h("div",me,[i("div",de,[l.valueStart>0||l.valueEnd<l.max?(p(),h("div",pe,[l.useResetSlot?ee(t.$slots,"reset-action",{key:1,reset:L},void 0,!0):(p(),h("button",{key:0,"data-cy-reset":"",tabindex:"0",role:"button",class:"vue-data-ui-refresh-button",style:S({top:y.value?"36px":"-16px",pointerEvents:"all !important"}),onClick:L},[te(ne,{name:"refresh",stroke:l.textColor},null,8,["stroke"])],4))])):k("",!0)]),i("div",{class:"double-range-slider",ref_key:"minimapWrapper",ref:N,style:{"z-index":"0"}},[y.value?(p(),h("div",he,[(p(),h("svg",{xmlns:le(ve),viewBox:`0 0 ${a.value.width<0?0:a.value.width} ${a.value.height<0?0:a.value.height}`},[i("defs",null,[i("linearGradient",{id:w.value,x1:"0%",y1:"0%",x2:"0%",y2:"100%"},[i("stop",{offset:"0%","stop-color":`${l.minimapLineColor}50`},null,8,xe),ye],8,fe)]),i("path",{d:`M${m.value.fullSet}`,stroke:`${l.minimapLineColor}`,fill:"none","stroke-width":"1","stroke-linecap":"round","stroke-linejoin":"round",style:{opacity:"1"}},null,8,ge),i("rect",{x:c.value.x,width:c.value.width<0?0:c.value.width,height:a.value.height,y:0,fill:g.value,rx:l.minimapSelectionRadius,stroke:"none"},null,8,be),i("path",{d:`M${s.value/2},${a.value.height} ${m.value.fullSet} L${a.value.width-s.value/2},${a.value.height}Z`,fill:`url(#${w.value})`,stroke:"none",style:{opacity:"1"}},null,8,Se),i("rect",{x:c.value.x,width:c.value.width<0?0:c.value.width,height:a.value.height,y:0,fill:g.value},null,8,ke),i("rect",{x:c.value.x,width:c.value.width<0?0:c.value.width,height:a.value.height,y:0,fill:l.minimapSelectedColor,style:S({opacity:l.minimapSelectedColorOpacity})},null,12,we),i("path",{d:`M${m.value.sliced[0].x},${a.value.height} ${m.value.selectionSet} L${m.value.sliced.at(-1).x},${a.value.height}Z`,fill:`url(#${w.value})`,stroke:"none",style:{opacity:"1"}},null,8,Ne),i("path",{d:`M ${m.value.selectionSet}`,stroke:`${l.minimapLineColor}`,fill:"transparent","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,8,Ce),i("circle",{cx:m.value.firstPlot.x,cy:m.value.firstPlot.y,"stroke-width":"0.5",stroke:g.value,r:"3",fill:l.minimapLineColor},null,8,$e),i("circle",{cx:m.value.lastPlot.x,cy:m.value.lastPlot.y,"stroke-width":"0.5",stroke:g.value,r:"3",fill:l.minimapLineColor},null,8,Me),b.value!==null?(p(!0),h(A,{key:0},E(F.value,(n,d)=>(p(),h("g",null,[b.value===n&&n>=l.valueStart&&n<l.valueEnd?(p(),h("line",{key:0,x1:s.value*d+s.value/2,x2:s.value*d+s.value/2,y1:0,y2:a.value.height,stroke:l.minimapIndicatorColor,"stroke-linecap":"round","stroke-dasharray":"2","stroke-width":"1"},null,8,Fe)):k("",!0)]))),256)):k("",!0),(p(!0),h(A,null,E(F.value,(n,d)=>(p(),h("rect",{x:s.value*d,y:0,height:a.value.height,width:s.value,fill:"transparent",style:{"pointer-events":"all !important"},onMouseenter:C=>T(n),onMouseleave:u[0]||(u[0]=C=>{b.value=null,x("trapMouse",null)})},null,40,Le))),256))],8,ce))])):k("",!0),Ie,i("div",{class:"range-highlight",style:S(V.value)},null,4),z(i("input",{type:"range",class:"range-left",min:l.min,max:l.max,"onUpdate:modelValue":u[1]||(u[1]=n=>r.value=n),onInput:G},null,40,Ae),[[_,r.value]]),i("div",{class:"thumb-label thumb-label-left",style:S(Z.value)},B(l.labelLeft),5),z(i("input",{type:"range",class:"range-right",min:l.min,max:l.max,"onUpdate:modelValue":u[2]||(u[2]=n=>o.value=n),onInput:U},null,40,Ee),[[_,o.value]]),i("div",{class:"thumb-label thumb-label-right",style:S(Q.value)},B(l.labelRight),5)],512)]))}},Oe=ue(ze,[["__scopeId","data-v-54291cff"]]);export{Oe as _};
