import{o as J,L as Z,G as ee,X as te,K as ae,p as S,Q as le,n as se,k as X,b as oe}from"../chart.md.hi_nZSnT.js";import{x as ne}from"./Title-DYNLqCCT.D6xZGHSM.js";import{s as re,i as ue}from"./usePrinter-8ofTb2MJ.pt_J2AaR.js";import{O as ie,M as ce}from"./useResponsive-NZB-WLRF.DbXjWqi_.js";import ve from"./vue-ui-skeleton-B2sRnIXX.C3JvNOY7.js";import{c as Y}from"./useNestedProp-S1UXxUgm.CErBICdk.js";import{p as he}from"./PackageVersion-DtnhR89q.DeJ10Meb.js";import{s as de}from"./vue-data-ui-Cp7bO_tj.DKBrIOIj.js";import{h as p,p as r,q as j,v as ye,Y as ge,o as u,c as h,b,e as d,aj as fe,w as C,r as y,ak as q,al as E,k as n,n as H,N as K,G as me,F as pe,C as ke,t as we}from"./framework.BaNfDZ-f.js";const xe=["id"],be=["xmlns","viewBox"],Ce=["x1","x2","y1","y2","stroke","stroke-width","stroke-linecap"],$e=["cx","cy","r","stroke","stroke-width"],Ie=["x","y","font-size","fill","font-weight"],Pe={key:3,class:"vue-data-ui-watermark"},Fe={__name:"vue-ui-wheel",props:{config:{type:Object,default(){return{}}},dataset:{type:Object,default(){return{}}}},setup(L,{expose:Q}){const c=L,{vue_ui_wheel:R}=J(),k=p(()=>!!c.dataset&&Object.keys(c.dataset).length),w=r(Z()),T=r(null),$=r(0),g=r(null),I=r(null),P=r(0),e=p({get:()=>F(),set:t=>t});function F(){const t=Y({userConfig:c.config,defaultConfig:R});return t.theme?{...Y({userConfig:ee.vue_ui_wheel[t.theme]||c.config,defaultConfig:t})}:t}j(()=>c.config,t=>{e.value=F(),B(),P.value+=1},{deep:!0});const{isPrinting:_,isImaging:z,generatePdf:M,generateImage:O}=re({elementId:w.value,fileName:e.value.style.chart.title.text||"vue-ui-wheel"}),l=r({size:360,height:360,width:360}),x=r(e.value.style.chart.layout.percentage.fontSize),i=p(()=>({radius:Math.min(l.value.width,l.value.height)*.9/2,centerX:l.value.width/2,centerY:l.value.height/2}));function G(t,s=1){return{x:i.value.centerX+i.value.radius*Math.cos(29.85+t*Math.PI/180)*s,y:i.value.centerY+i.value.radius*Math.sin(29.85+t*Math.PI/180)*s}}const o=r(e.value.style.chart.animation.use?0:c.dataset.percentage||0);j(()=>c.dataset,t=>{e.value.style.chart.animation.use?N(t.percentage):o.value=t.percentage||0},{deep:!0});const f=r(null);ye(()=>{B()});function B(){if(te(c.dataset)&&ae({componentName:"VueUiWheel",type:"dataset"}),N(c.dataset.percentage||0),e.value.responsive){const t=ie(()=>{const{width:s,height:a}=ce({chart:g.value,title:e.value.style.chart.title.text?I.value:null});l.value.width=s,l.value.height=a,x.value=e.value.style.chart.layout.percentage.fontSize/360*Math.min(s,a)});f.value=new ResizeObserver(t),f.value.observe(g.value.parentNode)}}ge(()=>{f.value&&f.value.disconnect()});function N(t){let s=e.value.style.chart.animation.speed;const a=Math.abs(t-o.value)/(s*120);function v(){o.value<t?o.value=Math.min(o.value+a,t):o.value>t&&(o.value=Math.max(o.value-a,t)),o.value!==t&&requestAnimationFrame(v)}v()}const V=p(()=>{const t=[];for(let s=0;s<100;s+=1){const a=o.value>s?e.value.style.chart.layout.wheel.ticks.activeColor:e.value.style.chart.layout.wheel.ticks.inactiveColor,{x:v,y:A}=G(l.value.size/100*s),{x:U,y:D}=G(l.value.size/100*s,e.value.style.chart.layout.wheel.ticks.sizeRatio);t.push({x1:v,y1:A,x2:U,y2:D,color:e.value.style.chart.layout.wheel.ticks.gradient.show?S(a,s/100*(e.value.style.chart.layout.wheel.ticks.gradient.shiftHueIntensity/100)):a})}return t}),m=r(!1);function W(t){m.value=t,$.value+=1}return Q({generatePdf:M,generateImage:O}),(t,s)=>(u(),h("div",{class:"vue-ui-wheel",ref_key:"wheelChart",ref:g,id:w.value,style:K(`font-family:${e.value.style.fontFamily};width:100%; text-align:center;background:${e.value.style.chart.backgroundColor};${e.value.responsive?"height:100%":""}`)},[e.value.style.chart.title.text?(u(),h("div",{key:0,ref_key:"chartTitle",ref:I,style:"width:100%;background:transparent;padding-bottom:12px"},[(u(),b(ne,{key:`title_${P.value}`,config:{title:{cy:"wheel-title",...e.value.style.chart.title},subtitle:{cy:"wheel-subtitle",...e.value.style.chart.title.subtitle}}},null,8,["config"]))],512)):d("",!0),e.value.userOptions.show&&k.value?(u(),b(ue,{ref_key:"details",ref:T,key:`user_options_${$.value}`,backgroundColor:e.value.style.chart.backgroundColor,color:e.value.style.chart.color,isPrinting:n(_),isImaging:n(z),uid:w.value,hasPdf:e.value.userOptions.buttons.pdf,hasImg:e.value.userOptions.buttons.img,hasFullscreen:e.value.userOptions.buttons.fullscreen,hasXls:!1,isFullscreen:m.value,position:e.value.userOptions.position,titles:{...e.value.userOptions.buttonTitles},chartElement:g.value,onToggleFullscreen:W,onGeneratePdf:n(M),onGenerateImage:n(O)},fe({_:2},[t.$slots.optionPdf?{name:"optionPdf",fn:C(()=>[y(t.$slots,"optionPdf",{},void 0,!0)]),key:"0"}:void 0,t.$slots.optionImg?{name:"optionImg",fn:C(()=>[y(t.$slots,"optionImg",{},void 0,!0)]),key:"1"}:void 0,t.$slots.optionFullscreen?{name:"optionFullscreen",fn:C(({toggleFullscreen:a,isFullscreen:v})=>[y(t.$slots,"optionFullscreen",q(E({toggleFullscreen:a,isFullscreen:v})),void 0,!0)]),key:"2"}:void 0]),1032,["backgroundColor","color","isPrinting","isImaging","uid","hasPdf","hasImg","hasFullscreen","isFullscreen","position","titles","chartElement","onGeneratePdf","onGenerateImage"])):d("",!0),k.value?(u(),h("svg",{key:2,xmlns:n(le),class:H({"vue-data-ui-fullscreen--on":m.value,"vue-data-ui-fulscreen--off":!m.value}),viewBox:`0 0 ${l.value.width<=0?10:l.value.width} ${l.value.height<=0?10:l.value.height}`,style:K(`max-width:100%;overflow:visible;background:transparent;color:${e.value.style.chart.color}`)},[me(he),(u(!0),h(pe,null,ke(V.value,(a,v)=>(u(),h("line",{x1:a.x1,x2:a.x2,y1:a.y1,y2:a.y2,stroke:a.color,"stroke-width":5/360*Math.min(l.value.width,l.value.height),"stroke-linecap":e.value.style.chart.layout.wheel.ticks.rounded?"round":"butt",class:H({"vue-ui-tick-animated":e.value.style.chart.animation.use&&v<=o.value})},null,10,Ce))),256)),e.value.style.chart.layout.innerCircle.show?(u(),h("circle",{key:0,cx:i.value.centerX,cy:i.value.centerY,r:i.value.radius*.8<=0?1e-4:i.value.radius*.8,stroke:e.value.style.chart.layout.innerCircle.stroke,"stroke-width":e.value.style.chart.layout.innerCircle.strokeWidth,fill:"none"},null,8,$e)):d("",!0),e.value.style.chart.layout.percentage.show?(u(),h("text",{key:1,x:i.value.centerX,y:i.value.centerY+x.value/3,"font-size":x.value,fill:e.value.style.chart.layout.wheel.ticks.gradient.show?n(S)(e.value.style.chart.layout.wheel.ticks.activeColor,o.value/100*(e.value.style.chart.layout.wheel.ticks.gradient.shiftHueIntensity/100)):e.value.style.chart.layout.wheel.ticks.activeColor,"text-anchor":"middle","font-weight":e.value.style.chart.layout.percentage.bold?"bold":"normal",style:{"font-variant-numeric":"tabluar-nums"}},we(n(se)(e.value.style.chart.layout.percentage.formatter,n(X)(o.value),n(oe)({v:n(X)(o.value),s:"%",r:e.value.style.chart.layout.percentage.rounding}))),9,Ie)):d("",!0),y(t.$slots,"svg",{svg:l.value},void 0,!0)],14,be)):d("",!0),t.$slots.watermark?(u(),h("div",Pe,[y(t.$slots,"watermark",q(E({isPrinting:n(_)||n(z)})),void 0,!0)])):d("",!0),k.value?d("",!0):(u(),b(ve,{key:4,config:{type:"wheel",style:{backgroundColor:e.value.style.chart.backgroundColor,wheel:{color:"#CCCCCC"}}}},null,8,["config"]))],12,xe))}},Ye=de(Fe,[["__scopeId","data-v-b8e98e43"]]);export{Ye as default};
