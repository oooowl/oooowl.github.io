import{o as ft,L as Be,G as pt,R as mt,e as se,t as Ge,a as xt,X as kt,K as Ee,q as wt,j as zt,a4 as re,a0 as We,I as De,Q as Ct,M as Lt,x as Je,b as H,H as Ye,n as qe,$ as $t,N as Mt,O as St}from"../chart.md.hi_nZSnT.js";import{c as Ue}from"./useNestedProp-S1UXxUgm.CErBICdk.js";import{O as _t,M as Nt}from"./useResponsive-NZB-WLRF.DbXjWqi_.js";import{s as Tt,i as It}from"./usePrinter-8ofTb2MJ.pt_J2AaR.js";import{_ as Ot}from"./Slicer-BZfUZr1J.DTx2MfEZ.js";import{E as Rt}from"./Tooltip-CICAYyQj.DC7pN5Ho.js";import{x as Vt}from"./Title-DYNLqCCT.D6xZGHSM.js";import{C as Ft}from"./Legend-DXLiSLHd.5wpQgPWV.js";import Pt from"./vue-ui-accordion-D_1fE5EF.ggAyum2g.js";import{W as At}from"./DataTable-DL2agEJ3.DwhyhpBD.js";import Ht from"./vue-ui-skeleton-B2sRnIXX.C3JvNOY7.js";import{p as jt}from"./PackageVersion-DtnhR89q.DeJ10Meb.js";import{s as Bt}from"./vue-data-ui-Cp7bO_tj.DKBrIOIj.js";import{h as m,p as b,v as Xe,q as Qe,o as r,c as u,r as z,G as ie,e as c,b as Z,aj as Gt,w as C,ak as G,al as E,k as L,N as W,F as d,C as f,j,n as de,t as M,a as Et}from"./framework.BaNfDZ-f.js";import"./Shape-CO_Ak9Zm.UkrUmJI7.js";const Wt=["id"],Dt=["xmlns","viewBox"],Jt={key:0},Yt=["id"],qt=["stop-color"],Ut=["stop-color"],Xt=["stop-color"],Qt=["x1","x2","y1","y2","stroke"],Zt=["x1","x2","y1","y2","stroke"],Kt=["x1","x2","y1","y2","stroke"],ea=["x1","x2","y1","y2","stroke"],ta=["x","y","height","rx","width","fill","stroke","stroke-width"],aa=["x","y","width","rx","height","fill","stroke","stroke-width"],la=["x1","x2","y1","y2","stroke","stroke-width"],oa=["x1","x2","y1","y2","stroke","stroke-width"],sa=["x","y","font-size","fill","font-weight"],ra=["transform","font-size","fill","font-weight"],ia=["x","y","font-size","fill","font-weight"],ua={key:0},na=["x","y","font-size","font-weight","fill"],va=["x","y","font-size","fill","font-weight"],ca={key:0},da=["x","y","font-size","font-weight","fill"],ha=["x1","x2","y1","y2","stroke"],ya=["x","y","font-size","font-weight","fill"],ga=["x1","x2","y1","y2","stroke"],ba=["font-size","font-weight","fill","text-anchor","transform"],fa=["text-anchor","font-size","font-weight","fill","transform"],pa=["font-size","font-weight","fill","x","y"],ma=["x","y","width","height","onClick","onMouseenter","fill"],xa=["x","y","width","height","onClick","onMouseenter","fill"],ka={key:3,class:"vue-data-ui-watermark"},wa=["onClick"],za=["innerHTML"],Ca={__name:"vue-ui-stackbar",props:{config:{type:Object,default(){return{}}},dataset:{type:Array,default(){return[]}}},emits:["selectDatapoint","selectLegend"],setup(he,{expose:Ze,emit:ye}){const x=he,{vue_ui_stackbar:Ke}=ft(),B=m({get(){return!!x.dataset&&x.dataset.length},set(a){return a}}),D=b(null),ue=b(Be()),K=b(!1),ge=b(null),ne=b(""),$=b([]),be=b(0),fe=b(null),pe=b(null),me=b(null),xe=b(0),ve=b(!1),J=b(null),Y=b(!1),et=b(0),tt=b(0),at=b(0);Xe(()=>{ce()});const e=m({get:()=>ke(),set:a=>a});function ke(){const a=Ue({userConfig:x.config,defaultConfig:Ke});let o={};return a.theme?o={...Ue({userConfig:pt.vue_ui_stackbar[a.theme]||x.config,defaultConfig:a}),customPalette:mt[a.theme]||se}:o=a,x.config&&Ge(x.config,"style.chart.grid.scale.scaleMin")?o.style.chart.grid.scale.scaleMin=x.config.style.chart.grid.scale.scaleMin:o.style.chart.grid.scale.scaleMin=null,x.config&&Ge(x.config,"style.chart.grid.scale.scaleMax")?o.style.chart.grid.scale.scaleMax=x.config.style.chart.grid.scale.scaleMax:o.style.chart.grid.scale.scaleMax=null,o}Qe(()=>x.config,a=>{e.value=ke(),ce(),et.value+=1,tt.value+=1,at.value+=1},{deep:!0}),Qe(()=>x.dataset,a=>{Se()},{deep:!0});const w=b({dataLabels:{show:e.value.style.chart.bars.dataLabels.show},showTable:e.value.table.show,showTooltip:e.value.style.chart.tooltip.show}),{isPrinting:we,isImaging:ze,generatePdf:Ce,generateImage:Le}=Tt({elementId:`stackbar_${ue.value}`,fileName:e.value.style.chart.title.text||"vue-ui-stackbar"}),ee=b({width:e.value.style.chart.width,height:e.value.style.chart.height,paddingRatio:{top:e.value.style.chart.padding.top/e.value.style.chart.height,right:e.value.style.chart.padding.right/e.value.style.chart.width,bottom:e.value.style.chart.padding.bottom/e.value.style.chart.height,left:e.value.style.chart.padding.left/e.value.style.chart.width}}),lt=m(()=>xt(e.value.customPalette)),$e=b(null),Me=b(null);Xe(()=>{ce()});function ce(){if(kt(x.dataset)?Ee({componentName:"VueUiStackbar",type:"dataset"}):x.dataset.forEach((a,o)=>{wt({datasetObject:a,requiredAttributes:["name","series"]}).forEach(t=>{B.value=!1,Ee({componentName:"VueUiStackbar",type:"datasetSerieAttribute",property:t,index:o})})}),setTimeout(()=>{Y.value=!0},10),e.value.responsive){const a=_t(()=>{Y.value=!1;const{width:o,height:t}=Nt({chart:D.value,title:e.value.style.chart.title.text?fe.value:null,legend:e.value.style.chart.legend.show?pe.value:null,slicer:e.value.style.chart.zoom.show&&R.value>1?me.value:null});ee.value.width=o,ee.value.height=t,clearTimeout(Me.value),Me.value=setTimeout(()=>{Y.value=!0},10)});$e.value=new ResizeObserver(a),$e.value.observe(D.value.parentNode)}}const s=m(()=>{const{height:a,width:o}=ee.value,{right:t}=ee.value.paddingRatio,l=e.value.style.chart.padding.top,i=o-o*t,n=a-e.value.style.chart.padding.bottom,k=e.value.style.chart.padding.left,V=o-k-o*t,F=a-l-e.value.style.chart.padding.bottom;return{chartHeight:a,chartWidth:o,top:l,right:i,bottom:n,left:k,width:V,height:F<0?0:F}}),O=m(()=>x.dataset.map((a,o)=>{const t=zt(a.color)||lt.value[o]||se[o]||se[o%se.length];return{...a,series:JSON.parse(JSON.stringify(a.series)).map(l=>e.value.style.chart.bars.distributed?Math.abs(l):l),signedSeries:a.series.map(l=>l>=0?1:-1),absoluteIndex:o,id:Be(),color:t}})),R=m(()=>Math.max(...O.value.filter(a=>!$.value.includes(a.id)).map(a=>a.series.length))),v=b({start:0,end:Math.max(...x.dataset.map(a=>a.series.length))});function Se(){v.value={start:0,end:Math.max(...x.dataset.map(a=>a.series.length))},xe.value+=1}const h=m(()=>{let a;return e.value.orientation==="vertical"?a=s.value.width/(v.value.end-v.value.start):a=s.value.height/(v.value.end-v.value.start),a<=0?0:a}),q=m(()=>re(O.value.filter(a=>!$.value.includes(a.id))).slice(v.value.start,v.value.end)),ot=m(()=>re(O.value.filter(a=>!$.value.includes(a.id)).map(a=>({...a,series:a.series.map((o,t)=>a.signedSeries[t]===-1&&o>=0?-o:o)}))).slice(v.value.start,v.value.end)),te=m(()=>{const a=O.value.filter(o=>!$.value.includes(o.id));return{positive:re(a.map(o=>({...o,series:o.series.slice(v.value.start,v.value.end).map(t=>t>=0?t:0)}))),negative:re(a.map(o=>({...o,series:o.series.slice(v.value.start,v.value.end).map(t=>t<0?t:0)})))}}),T=m(()=>{const a=e.value.style.chart.grid.scale.scaleMax!==null&&!e.value.style.chart.bars.distributed?e.value.style.chart.grid.scale.scaleMax:Math.max(...te.value.positive),o=Math.min(...te.value.negative),t=e.value.style.chart.grid.scale.scaleMin!==null&&!e.value.style.chart.bars.distributed?e.value.style.chart.grid.scale.scaleMin:[-1/0,1/0,NaN,void 0,null].includes(o)?0:o,l=!e.value.style.chart.bars.distributed&&(e.value.style.chart.grid.scale.scaleMax!==null||e.value.style.chart.grid.scale.scaleMin!==null)?We(t>0?0:t,a<0?0:a,e.value.style.chart.grid.scale.ticks):De(t>0?0:t,a<0?0:a,e.value.style.chart.grid.scale.ticks);return l.ticks.map(i=>({zero:s.value.bottom-s.value.height*(Math.abs(l.min)/(l.max+Math.abs(l.min))),y:s.value.bottom-s.value.height*((i+Math.abs(l.min))/(l.max+Math.abs(l.min))),x:s.value.left-8,horizontal_zero:s.value.left+s.value.width*(Math.abs(l.min)/(l.max+Math.abs(l.min))),horizontal_x:s.value.left+s.value.width*((i+Math.abs(l.min))/(l.max+Math.abs(l.min))),horizontal_y:s.value.bottom-8,value:i}))}),U=m(()=>e.value.style.chart.grid.x.timeLabels.values.slice(v.value.start,v.value.end)),p=m(()=>{if(!B.value)return[];let a=Array(R.value).fill(0),o=Array(R.value).fill(0),t=Array(R.value).fill(0),l=Array(R.value).fill(0);const i=Math.max(...te.value.positive)||0,n=Math.min(...te.value.negative),k=[-1/0,1/0,NaN,void 0,null].includes(n)?0:n,V=!e.value.style.chart.bars.distributed&&(e.value.style.chart.grid.scale.scaleMax!==null||e.value.style.chart.grid.scale.scaleMin!==null)?We(e.value.style.chart.grid.scale.scaleMin!==null?e.value.style.chart.grid.scale.scaleMin:k>0?0:k,e.value.style.chart.grid.scale.scaleMax!==null?e.value.style.chart.grid.scale.scaleMax:i<0?0:i,e.value.style.chart.grid.scale.ticks):De(e.value.style.chart.grid.scale.scaleMin!==null?e.value.style.chart.grid.scale.scaleMin:k>0?0:k,e.value.style.chart.grid.scale.scaleMax!==null?e.value.style.chart.grid.scale.scaleMax:i<0?0:i,e.value.style.chart.grid.scale.ticks),{min:F,max:X}=V,P=X+(F>=0?0:Math.abs(F))||1,S=s.value.height,oe=s.value.width,He=T.value[0]?T.value[0].zero:s.value.bottom,je=T.value[0]?T.value[0].horizontal_zero:s.value.left;return O.value.filter(Q=>!$.value.includes(Q.id)).map(Q=>{const I=Q.series.slice(v.value.start,v.value.end),nt=Q.signedSeries.slice(v.value.start,v.value.end),vt=I.map((y,g)=>s.value.left+h.value*g+h.value*e.value.style.chart.bars.gapRatio/4),ct=I.map((y,g)=>s.value.top+h.value*g+h.value*e.value.style.chart.bars.gapRatio/4),dt=I.map((y,g)=>{const _=e.value.style.chart.bars.distributed?(y||0)/q.value[g]:(y||0)/P;let A,N;return y>0?(N=S*_,A=He-N-a[g],a[g]+=N):(N=S*_,A=He+t[g],t[g]+=Math.abs(N)),A}),ht=I.map((y,g)=>{const _=e.value.style.chart.bars.distributed?(y||0)/q.value[g]:(y||0)/P;let A,N;return y>0?(N=oe*_,A=je+o[g],o[g]+=N):(N=oe*_,A=je-Math.abs(N)-l[g],l[g]+=Math.abs(N)),A}),yt=I.map((y,g)=>{const _=e.value.style.chart.bars.distributed?(y||0)/q.value[g]:(y||0)/P;return y>0?S*_:S*Math.abs(_)}),gt=I.map((y,g)=>{const _=e.value.style.chart.bars.distributed?(y||0)/q.value[g]:(y||0)/P;return y>0?oe*_:oe*Math.abs(_)}),bt=I.map(y=>Math.abs(y)).reduce((y,g)=>y+g,0);return{...Q,proportions:I.map((y,g)=>e.value.style.chart.bars.distributed?(y||0)/q.value[g]:(y||0)/bt),series:I,signedSeries:nt,x:vt,y:dt,height:yt,horizontal_width:gt,horizontal_y:ct,horizontal_x:ht}})}),_e=m(()=>ot.value.map((a,o)=>({value:a,sign:a>=0?1:-1})));function ae(a,o,t,l,i){const n=i===-1&&a>=0?-a:a;return qe(e.value.style.chart.bars.dataLabels.formatter,n,H({p:e.value.style.chart.bars.dataLabels.prefix,v:n,s:e.value.style.chart.bars.dataLabels.suffix,r:e.value.style.chart.bars.dataLabels.rounding}),{datapoint:o,seriesIndex:t,datapointIndex:l})}function Ne(a,o,t,l){return qe(e.value.style.chart.bars.dataLabels.formatter,a,H({v:a,s:"%",r:e.value.style.chart.bars.dataLabels.rounding}),{datapoint:o,seriesIndex:t,datapointIndex:l})}function Te(a){const o=JSON.parse(JSON.stringify(p.value)).map(t=>({name:t.name,value:t.series[a]===0?0:t.series[a]||null,proportion:t.proportions[a]||null,color:t.color,id:t.id}));ye("selectDatapoint",{datapoint:o,period:U.value[a]})}function Ie(a){J.value=a,K.value=!0;const o=e.value.style.chart.tooltip.customFormat,t=JSON.parse(JSON.stringify(p.value)).map(i=>({name:i.name,value:i.series[a]===0?0:(i.signedSeries[a]===-1&&i.series[a]>=0?-i.series[a]:i.series[a])||null,proportion:i.proportions[a]||null,color:i.color,id:i.id})),l=t.map(i=>Math.abs(i.value)).reduce((i,n)=>i+n,0);if(Ye(o)&&$t(()=>o({seriesIndex:a,datapoint:t,series:p.value,config:e.value})))ne.value=o({seriesIndex:a,datapoint:t,series:p.value,config:e.value});else{const{showValue:i,showPercentage:n,borderColor:k,roundingValue:V,roundingPercentage:F}=e.value.style.chart.tooltip;let X="";U.value[a]&&(X+=`<div style="width:100%;text-align:center;border-bottom:1px solid ${k};padding-bottom:6px;margin-bottom:3px;">${U.value[a]}</div>`);const P=[i&&n?"(":"",i&&n?")":""];t.reverse().forEach(S=>{X+=`
                <div style="display:flex;flex-direction:row;align-items:center;gap:4px">
                    <svg viewBox="0 0 12 12" height="14" width="14"><rect rx="1" x="0" y="0" height="12" width="12" stroke="none" fill="${e.value.style.chart.bars.gradient.show?`url(#gradient_${S.id})`:S.color}"/></svg>
                    ${S.name}${i||n?":":""} ${i?H({p:e.value.style.chart.bars.dataLabels.prefix,v:S.value,s:e.value.style.chart.bars.dataLabels.suffix,r:V}):""} ${P[0]}${n?H({v:isNaN(S.value/l)?0:Math.abs(S.value)/l*100,s:"%",r:F}):""}${P[1]}
                </div>
            `}),ne.value=`<div>${X}</div>`}}function st(a){ve.value=a,be.value+=1}function Oe(){w.value.showTable=!w.value.showTable}function Re(){w.value.dataLabels.show=!w.value.dataLabels.show}function Ve(){w.value.showTooltip=!w.value.showTooltip}function rt(){return p.value}const Fe=m(()=>{if(p.value.length===0)return{head:[],body:[],config:{},columnNames:[]};const a=p.value.map(({name:t,color:l})=>({label:t,color:l})),o=[];for(let t=v.value.start;t<v.value.end;t+=1){const l=[e.value.style.chart.grid.x.timeLabels.values[t]||t+1];O.value.forEach(i=>{l.push(Number((i.series[t]||0).toFixed(e.value.table.td.roundingValue)))}),o.push(l)}return{head:a,body:o}});function Pe(){const a=[[e.value.style.chart.title.text],[e.value.style.chart.title.subtitle.text],[""]],o=["",...Fe.value.head.map(n=>n.label)],t=Fe.value.body,l=a.concat([o]).concat(t),i=Mt(l);St({csvContent:i,title:e.value.style.chart.title.text||"vue-ui-stackbar"})}const le=m(()=>{const a=[""].concat(p.value.map(i=>i.name)).concat(' <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M18 16v2a1 1 0 0 1 -1 1h-11l6 -7l-6 -7h11a1 1 0 0 1 1 1v2" /></svg>');let o=[];for(let i=0;i<R.value;i+=1){const n=p.value.map(k=>k.series[i]??0).reduce((k,V)=>k+V,0);o.push([e.value.style.chart.grid.x.timeLabels.values.slice(v.value.start,v.value.end)[i]??i+1].concat(p.value.map(k=>(k.series[i]??0).toFixed(e.value.table.td.roundingValue))).concat((n??0).toFixed(e.value.table.td.roundingValue)))}const t={th:{backgroundColor:e.value.table.th.backgroundColor,color:e.value.table.th.color,outline:e.value.table.th.outline},td:{backgroundColor:e.value.table.td.backgroundColor,color:e.value.table.td.color,outline:e.value.table.td.outline},breakpoint:e.value.table.responsiveBreakpoint},l=[e.value.table.columnNames.period].concat(p.value.map(i=>i.name)).concat(e.value.table.columnNames.total);return{head:a,body:o.slice(0,v.value.end-v.value.start),config:t,colNames:l}});function it(a,o){if(ye("selectLegend",p.value.find(t=>t.absoluteIndex===a)),$.value.includes(o.id))$.value=$.value.filter(t=>t!==o.id);else{if($.value.length===O.value.length-1)return;$.value.push(o.id)}}const Ae=m(()=>O.value.map((a,o)=>({...a,shape:"square"})).map(a=>({...a,opacity:$.value.includes(a.id)?.5:1,segregate:()=>it(a.absoluteIndex,a),isSegregated:$.value.includes(a.id)}))),ut=m(()=>({cy:"stackbar-legend",backgroundColor:e.value.style.chart.legend.backgroundColor,color:e.value.style.chart.legend.color,fontSize:e.value.style.chart.legend.fontSize,paddingBottom:12,fontWeight:e.value.style.chart.legend.bold?"bold":""}));return Ze({getData:rt,generatePdf:Ce,generateCsv:Pe,generateImage:Le,toggleTable:Oe,toggleLabels:Re,toggleTooltip:Ve}),(a,o)=>(r(),u("div",{id:`stackbar_${ue.value}`,ref_key:"stackbarChart",ref:D,class:de({"vue-ui-stackbar":!0,"vue-data-ui-wrapper-fullscreen":ve.value}),style:W(`background:${e.value.style.chart.backgroundColor};color:${e.value.style.chart.color};font-family:${e.value.style.fontFamily}; position: relative; ${e.value.responsive?"height: 100%":""}`)},[z(a.$slots,"userConfig",{},void 0,!0),e.value.style.chart.title.text?(r(),u("div",{key:0,ref_key:"chartTitle",ref:fe,style:"width:100%;background:transparent;padding-bottom:24px"},[ie(Vt,{config:{title:{cy:"stackbar-title",...e.value.style.chart.title},subtitle:{cy:"stackbar-subtitle",...e.value.style.chart.title.subtitle}}},null,8,["config"])],512)):c("",!0),e.value.userOptions.show&&B.value?(r(),Z(It,{ref:"details",key:`user_option_${be.value}`,backgroundColor:e.value.style.chart.backgroundColor,color:e.value.style.chart.color,isPrinting:L(we),isImaging:L(ze),uid:ue.value,hasTooltip:e.value.style.chart.tooltip.show&&e.value.userOptions.buttons.tooltip,hasPdf:e.value.userOptions.buttons.pdf,hasImg:e.value.userOptions.buttons.img,hasXls:e.value.userOptions.buttons.csv,hasTable:e.value.userOptions.buttons.table,hasLabel:e.value.userOptions.buttons.labels,hasFullscreen:e.value.userOptions.buttons.fullscreen,isFullscreen:ve.value,chartElement:D.value,position:e.value.userOptions.position,isTooltip:w.value.showTooltip,titles:{...e.value.userOptions.buttonTitles},onToggleFullscreen:st,onGeneratePdf:L(Ce),onGenerateCsv:Pe,onGenerateImage:L(Le),onToggleTable:Oe,onToggleLabels:Re,onToggleTooltip:Ve},Gt({_:2},[a.$slots.optionTooltip?{name:"optionTooltip",fn:C(()=>[z(a.$slots,"optionTooltip",{},void 0,!0)]),key:"0"}:void 0,a.$slots.optionPdf?{name:"optionPdf",fn:C(()=>[z(a.$slots,"optionPdf",{},void 0,!0)]),key:"1"}:void 0,a.$slots.optionCsv?{name:"optionCsv",fn:C(()=>[z(a.$slots,"optionCsv",{},void 0,!0)]),key:"2"}:void 0,a.$slots.optionImg?{name:"optionImg",fn:C(()=>[z(a.$slots,"optionImg",{},void 0,!0)]),key:"3"}:void 0,a.$slots.optionTable?{name:"optionTable",fn:C(()=>[z(a.$slots,"optionTable",{},void 0,!0)]),key:"4"}:void 0,a.$slots.optionLabels?{name:"optionLabels",fn:C(()=>[z(a.$slots,"optionLabels",{},void 0,!0)]),key:"5"}:void 0,a.$slots.optionFullscreen?{name:"optionFullscreen",fn:C(({toggleFullscreen:t,isFullscreen:l})=>[z(a.$slots,"optionFullscreen",G(E({toggleFullscreen:t,isFullscreen:l})),void 0,!0)]),key:"6"}:void 0]),1032,["backgroundColor","color","isPrinting","isImaging","uid","hasTooltip","hasPdf","hasImg","hasXls","hasTable","hasLabel","hasFullscreen","isFullscreen","chartElement","position","isTooltip","titles","onGeneratePdf","onGenerateImage"])):c("",!0),B.value?(r(),u("svg",{key:2,xmlns:L(Ct),viewBox:`0 0 ${s.value.chartWidth<=0?10:s.value.chartWidth} ${s.value.chartHeight<=0?10:s.value.chartHeight}`,style:W(`max-width:100%;overflow:visible;background:transparent;color:${e.value.style.chart.color}`)},[ie(jt),e.value.style.chart.bars.gradient.show?(r(),u("defs",Jt,[(r(!0),u(d,null,f(p.value,(t,l)=>(r(),u("linearGradient",{id:`gradient_${t.id}`,x1:"0%",y1:"0%",x2:"0%",y2:"100%"},[j("stop",{offset:"0%","stop-color":t.color},null,8,qt),j("stop",{offset:"61.8%","stop-color":L(Lt)(t.color,e.value.style.chart.bars.gradient.intensity/100)},null,8,Ut),j("stop",{offset:"100%","stop-color":t.color},null,8,Xt)],8,Yt))),256))])):c("",!0),e.value.style.chart.grid.x.showHorizontalLines&&e.value.orientation==="vertical"?(r(!0),u(d,{key:1},f(T.value,(t,l)=>(r(),u("line",{x1:s.value.left,x2:s.value.right,y1:t.y,y2:t.y,stroke:e.value.style.chart.grid.x.axisColor,"stroke-width":1,"stroke-linecap":"round"},null,8,Qt))),256)):c("",!0),e.value.style.chart.grid.x.showHorizontalLines&&e.value.orientation==="horizontal"?(r(!0),u(d,{key:2},f(v.value.end-v.value.start+1,(t,l)=>(r(),u("line",{x1:s.value.left,x2:s.value.right,y1:s.value.top+h.value*l,y2:s.value.top+h.value*l,stroke:e.value.style.chart.grid.y.axisColor,"stroke-width":1,"stroke-linecap":"round"},null,8,Zt))),256)):c("",!0),e.value.style.chart.grid.y.showVerticalLines&&e.value.orientation==="vertical"?(r(!0),u(d,{key:3},f(v.value.end-v.value.start+1,(t,l)=>(r(),u("line",{x1:s.value.left+h.value*l,x2:s.value.left+h.value*l,y1:s.value.top,y2:s.value.bottom,stroke:e.value.style.chart.grid.y.axisColor,"stroke-width":1,"stroke-linecap":"round"},null,8,Kt))),256)):c("",!0),e.value.style.chart.grid.x.showHorizontalLines&&e.value.orientation==="horizontal"?(r(!0),u(d,{key:4},f(T.value,(t,l)=>(r(),u("line",{x1:t.horizontal_x,x2:t.horizontal_x,y1:s.value.top,y2:s.value.bottom,stroke:e.value.style.chart.grid.x.axisColor,"stroke-width":1,"stroke-linecap":"round"},null,8,ea))),256)):c("",!0),(r(!0),u(d,null,f(p.value,(t,l)=>(r(),u("g",null,[e.value.orientation==="vertical"?(r(!0),u(d,{key:0},f(t.x,(i,n)=>(r(),u("rect",{x:i,y:t.y[n]<0?0:t.y[n],height:t.height[n]<0?1e-4:t.height[n],rx:e.value.style.chart.bars.borderRadius>t.height[n]/2?(t.height[n]<0?0:t.height[n])/2:e.value.style.chart.bars.borderRadius,width:h.value*(1-e.value.style.chart.bars.gapRatio/2),fill:e.value.style.chart.bars.gradient.show?`url(#gradient_${t.id})`:t.color,stroke:e.value.style.chart.backgroundColor,"stroke-width":e.value.style.chart.bars.strokeWidth,"stroke-linecap":"round","stroke-linejoin":"round",class:de({"vue-data-ui-bar-animated":e.value.useCssAnimation,"vue-data-ui-bar-transition":Y.value})},null,10,ta))),256)):(r(!0),u(d,{key:1},f(t.horizontal_x,(i,n)=>(r(),u("rect",{x:i,y:t.horizontal_y[n]<0?0:t.horizontal_y[n],width:t.horizontal_width[n]<0?1e-4:t.horizontal_width[n],rx:e.value.style.chart.bars.borderRadius>t.height[n]/2?(t.height[n]<0?0:t.height[n])/2:e.value.style.chart.bars.borderRadius,height:h.value*(1-e.value.style.chart.bars.gapRatio/2),fill:e.value.style.chart.bars.gradient.show?`url(#gradient_${t.id})`:t.color,stroke:e.value.style.chart.backgroundColor,"stroke-width":e.value.style.chart.bars.strokeWidth,"stroke-linecap":"round","stroke-linejoin":"round",class:de({"vue-data-ui-bar-animated":e.value.useCssAnimation,"vue-data-ui-bar-transition":Y.value})},null,10,aa))),256))]))),256)),e.value.style.chart.grid.x.showAxis?(r(),u("line",{key:5,x1:s.value.left,x2:s.value.right,y1:s.value.bottom,y2:s.value.bottom,stroke:e.value.style.chart.grid.x.axisColor,"stroke-width":e.value.style.chart.grid.x.axisThickness,"stroke-linecap":"round","stroke-linejoin":"round"},null,8,la)):c("",!0),e.value.style.chart.grid.y.showAxis&&!e.value.style.chart.bars.distributed?(r(),u("line",{key:6,x1:s.value.left,x2:s.value.left,y1:s.value.top,y2:s.value.bottom,stroke:e.value.style.chart.grid.y.axisColor,"stroke-width":e.value.style.chart.grid.y.axisThickness,"stroke-linecap":"round","stroke-linejoin":"round"},null,8,oa)):c("",!0),e.value.style.chart.grid.x.axisName.show&&e.value.style.chart.grid.x.axisName.text?(r(),u("text",{key:7,x:s.value.left+s.value.width/2,y:s.value.chartHeight+e.value.style.chart.grid.x.axisName.offsetY,"font-size":e.value.style.chart.grid.x.axisName.fontSize,fill:e.value.style.chart.grid.x.axisName.color,"font-weight":e.value.style.chart.grid.x.axisName.bold?"bold":"normal","text-anchor":"middle"},M(e.value.style.chart.grid.x.axisName.text),9,sa)):c("",!0),e.value.style.chart.grid.y.axisName.show&&e.value.style.chart.grid.y.axisName.text?(r(),u("text",{key:8,transform:`translate(${e.value.style.chart.grid.y.axisName.fontSize+e.value.style.chart.grid.y.axisName.offsetX}, ${s.value.top+s.value.height/2}) rotate(-90)`,"font-size":e.value.style.chart.grid.y.axisName.fontSize,fill:e.value.style.chart.grid.y.axisName.color,"font-weight":e.value.style.chart.grid.y.axisName.bold?"bold":"normal","text-anchor":"middle"},M(e.value.style.chart.grid.y.axisName.text),9,ra)):c("",!0),w.value.dataLabels.show&&e.value.orientation==="vertical"?(r(),u(d,{key:9},[(r(!0),u(d,null,f(p.value,(t,l)=>(r(),u("g",null,[(r(!0),u(d,null,f(t.x,(i,n)=>(r(),u("text",{x:i+h.value*(1-e.value.style.chart.bars.gapRatio/2)/2,y:t.y[n]+t.height[n]/2+e.value.style.chart.bars.dataLabels.fontSize/3,"font-size":e.value.style.chart.bars.dataLabels.fontSize,fill:e.value.style.chart.bars.dataLabels.adaptColorToBackground?L(Je)(t.color):e.value.style.chart.bars.dataLabels.color,"font-weight":e.value.style.chart.bars.dataLabels.bold?"bold":"normal","text-anchor":"middle"},M(e.value.style.chart.bars.showDistributedPercentage&&e.value.style.chart.bars.distributed?Ne(t.proportions[n]*100,t,l,n):ae(t.series[n],t,l,n,t.signedSeries[n])),9,ia))),256))]))),256)),e.value.style.chart.bars.totalValues.show&&p.value.length>1?(r(),u("g",ua,[(r(!0),u(d,null,f(_e.value,(t,l)=>(r(),u("text",{x:s.value.left+h.value*l+h.value/2,y:s.value.top-e.value.style.chart.bars.totalValues.fontSize/3,"text-anchor":"middle","font-size":e.value.style.chart.bars.totalValues.fontSize,"font-weight":e.value.style.chart.bars.totalValues.bold?"bold":"normal",fill:e.value.style.chart.bars.totalValues.color},M(ae(t.value,t,l,t.sign)),9,na))),256))])):c("",!0)],64)):c("",!0),w.value.dataLabels.show&&e.value.orientation==="horizontal"?(r(),u(d,{key:10},[(r(!0),u(d,null,f(p.value,(t,l)=>(r(),u("g",null,[(r(!0),u(d,null,f(t.horizontal_x,(i,n)=>(r(),u("text",{x:i+(t.horizontal_width[n]<0?1e-4:t.horizontal_width[n])/2,y:t.horizontal_y[n]+h.value*(1-e.value.style.chart.bars.gapRatio/2)/2+e.value.style.chart.bars.dataLabels.fontSize/3,"font-size":e.value.style.chart.bars.dataLabels.fontSize,fill:e.value.style.chart.bars.dataLabels.adaptColorToBackground?L(Je)(t.color):e.value.style.chart.bars.dataLabels.color,"font-weight":e.value.style.chart.bars.dataLabels.bold?"bold":"normal","text-anchor":"middle"},M(e.value.style.chart.bars.showDistributedPercentage&&e.value.style.chart.bars.distributed?Ne(t.proportions[n]*100,t,l,n):ae(t.series[n],t,l,n,t.signedSeries[n])),9,va))),256))]))),256)),e.value.style.chart.bars.totalValues.show&&p.value.length>1?(r(),u("g",ca,[(r(!0),u(d,null,f(_e.value,(t,l)=>(r(),u("text",{x:s.value.right+e.value.style.chart.bars.totalValues.fontSize/3,y:s.value.top+h.value*l+h.value/2,"text-anchor":"start","font-size":e.value.style.chart.bars.totalValues.fontSize,"font-weight":e.value.style.chart.bars.totalValues.bold?"bold":"normal",fill:e.value.style.chart.bars.totalValues.color},M(ae(t.value,t,l,t.sign)),9,da))),256))])):c("",!0)],64)):c("",!0),e.value.style.chart.grid.y.axisLabels.show&&!e.value.style.chart.bars.distributed&&e.value.orientation==="vertical"?(r(),u(d,{key:11},[(r(!0),u(d,null,f(T.value,(t,l)=>(r(),u("line",{x1:s.value.left,x2:s.value.left-6,y1:t.y,y2:t.y,stroke:e.value.style.chart.grid.x.axisColor,"stroke-width":1},null,8,ha))),256)),(r(!0),u(d,null,f(T.value,(t,l)=>(r(),u("text",{x:t.x,y:t.y+e.value.style.chart.grid.y.axisLabels.fontSize/3,"font-size":e.value.style.chart.grid.y.axisLabels.fontSize,"font-weight":e.value.style.chart.grid.y.axisLabels.bold?"bold":"normal",fill:e.value.style.chart.grid.y.axisLabels.color,"text-anchor":"end"},M(L(H)({p:e.value.style.chart.bars.dataLabels.prefix,v:t.value,s:e.value.style.chart.bars.dataLabels.suffix,r:e.value.style.chart.grid.y.axisLabels.rounding})),9,ya))),256))],64)):c("",!0),e.value.style.chart.grid.y.axisLabels.show&&!e.value.style.chart.bars.distributed&&e.value.orientation==="horizontal"?(r(),u(d,{key:12},[(r(!0),u(d,null,f(T.value,(t,l)=>(r(),u("line",{x1:t.horizontal_x,x2:t.horizontal_x,y1:s.value.bottom,y2:s.value.bottom+6,stroke:e.value.style.chart.grid.x.axisColor,"stroke-width":1,"stroke-linecap":"round"},null,8,ga))),256)),(r(!0),u(d,null,f(T.value,(t,l)=>(r(),u("text",{"font-size":e.value.style.chart.grid.x.timeLabels.fontSize,"font-weight":e.value.style.chart.grid.y.axisLabels.bold?"bold":"normal",fill:e.value.style.chart.grid.y.axisLabels.color,"text-anchor":e.value.style.chart.grid.x.timeLabels.rotation>0?"start":e.value.style.chart.grid.x.timeLabels.rotation<0?"end":"middle",transform:`translate(${t.horizontal_x}, ${s.value.bottom+e.value.style.chart.grid.x.timeLabels.fontSize*1.3+e.value.style.chart.grid.x.timeLabels.offsetY}), rotate(${e.value.style.chart.grid.x.timeLabels.rotation})`},M(L(H)({p:e.value.style.chart.bars.dataLabels.prefix,v:t.value,s:e.value.style.chart.bars.dataLabels.suffix,r:e.value.style.chart.grid.y.axisLabels.rounding})),9,ba))),256))],64)):c("",!0),e.value.style.chart.grid.x.timeLabels.show&&e.value.orientation==="vertical"?(r(!0),u(d,{key:13},f(U.value,(t,l)=>(r(),u("text",{"text-anchor":e.value.style.chart.grid.x.timeLabels.rotation>0?"start":e.value.style.chart.grid.x.timeLabels.rotation<0?"end":"middle","font-size":e.value.style.chart.grid.x.timeLabels.fontSize,"font-weight":e.value.style.chart.grid.x.timeLabels.bold?"bold":"normal",fill:e.value.style.chart.grid.x.timeLabels.color,transform:`translate(${s.value.left+h.value*l+h.value/2}, ${s.value.bottom+e.value.style.chart.grid.x.timeLabels.fontSize*1.3+e.value.style.chart.grid.x.timeLabels.offsetY}), rotate(${e.value.style.chart.grid.x.timeLabels.rotation})`},M(t),9,fa))),256)):c("",!0),e.value.style.chart.grid.x.timeLabels.show&&e.value.orientation==="horizontal"?(r(!0),u(d,{key:14},f(U.value,(t,l)=>(r(),u("text",{"text-anchor":"end","font-size":e.value.style.chart.grid.y.axisLabels.fontSize,"font-weight":e.value.style.chart.grid.y.axisLabels.bold?"bold":"normal",fill:e.value.style.chart.grid.y.axisLabels.color,x:s.value.left-8,y:s.value.top+h.value*l+h.value/2+e.value.style.chart.grid.y.axisLabels.fontSize/3},M(t),9,pa))),256)):c("",!0),w.value.showTooltip&&e.value.orientation==="vertical"?(r(!0),u(d,{key:15},f(v.value.end-v.value.start,(t,l)=>(r(),u("rect",{x:s.value.left+l*h.value,y:s.value.top,width:h.value,height:s.value.height<0?0:s.value.height,onClick:i=>Te(l),onMouseenter:i=>Ie(l),onMouseleave:o[0]||(o[0]=i=>{J.value=null,K.value=!1}),fill:l===J.value?e.value.style.chart.highlighter.color:"transparent",style:W({opacity:e.value.style.chart.highlighter.opacity/100})},null,44,ma))),256)):c("",!0),w.value.showTooltip&&e.value.orientation==="horizontal"?(r(!0),u(d,{key:16},f(v.value.end-v.value.start,(t,l)=>(r(),u("rect",{x:s.value.left,y:s.value.top+l*h.value,width:s.value.width<0?0:s.value.width,height:h.value,onClick:i=>Te(l),onMouseenter:i=>Ie(l),onMouseleave:o[1]||(o[1]=i=>{J.value=null,K.value=!1}),fill:l===J.value?e.value.style.chart.highlighter.color:"transparent",style:W({opacity:e.value.style.chart.highlighter.opacity/100})},null,44,xa))),256)):c("",!0),z(a.$slots,"svg",G(E({...s.value})),void 0,!0)],12,Dt)):c("",!0),a.$slots.watermark?(r(),u("div",ka,[z(a.$slots,"watermark",G(E({isPrinting:L(we)||L(ze)})),void 0,!0)])):c("",!0),B.value?c("",!0):(r(),Z(Ht,{key:4,config:{type:"bar",style:{backgroundColor:e.value.style.chart.backgroundColor,bar:{axis:{color:"#CCCCCC"},color:"#CCCCCC"}}}},null,8,["config"])),j("div",{ref_key:"chartSlicer",ref:me,style:W(`width:100%;background:${e.value.style.chart.backgroundColor}`),"data-html2canvas-ignore":""},[e.value.style.chart.zoom.show&&R.value>1?(r(),Z(Ot,{key:`slicer_${xe.value}`,background:e.value.style.chart.zoom.color,borderColor:e.value.style.chart.backgroundColor,fontSize:e.value.style.chart.zoom.fontSize,useResetSlot:e.value.style.chart.zoom.useResetSlot,labelLeft:e.value.style.chart.grid.x.timeLabels.values[v.value.start]?e.value.style.chart.grid.x.timeLabels.values[v.value.start]:"",labelRight:e.value.style.chart.grid.x.timeLabels.values[v.value.end-1]?e.value.style.chart.grid.x.timeLabels.values[v.value.end-1]:"",textColor:e.value.style.chart.color,inputColor:e.value.style.chart.zoom.color,selectColor:e.value.style.chart.zoom.highlightColor,max:Math.max(...he.dataset.map(t=>t.series.length)),min:0,valueStart:v.value.start,valueEnd:v.value.end,start:v.value.start,"onUpdate:start":o[2]||(o[2]=t=>v.value.start=t),end:v.value.end,"onUpdate:end":o[3]||(o[3]=t=>v.value.end=t),onReset:Se},{"reset-action":C(({reset:t})=>[z(a.$slots,"reset-action",G(E({reset:t})),void 0,!0)]),_:3},8,["background","borderColor","fontSize","useResetSlot","labelLeft","labelRight","textColor","inputColor","selectColor","max","valueStart","valueEnd","start","end"])):c("",!0)],4),ie(Rt,{show:w.value.showTooltip&&K.value,backgroundColor:e.value.style.chart.tooltip.backgroundColor,color:e.value.style.chart.tooltip.color,fontSize:e.value.style.chart.tooltip.fontSize,borderRadius:e.value.style.chart.tooltip.borderRadius,borderColor:e.value.style.chart.tooltip.borderColor,borderWidth:e.value.style.chart.tooltip.borderWidth,backgroundOpacity:e.value.style.chart.tooltip.backgroundOpacity,position:e.value.style.chart.tooltip.position,offsetY:e.value.style.chart.tooltip.offsetY,parent:D.value,content:ne.value,isCustom:L(Ye)(e.value.style.chart.tooltip.customFormat)},{"tooltip-before":C(()=>[z(a.$slots,"tooltip-before",G(E({...ge.value})),void 0,!0)]),"tooltip-after":C(()=>[z(a.$slots,"tooltip-after",G(E({...ge.value})),void 0,!0)]),_:3},8,["show","backgroundColor","color","fontSize","borderRadius","borderColor","borderWidth","backgroundOpacity","position","offsetY","parent","content","isCustom"]),j("div",{ref_key:"chartLegend",ref:pe},[e.value.style.chart.legend.show&&B.value?(r(),Z(Ft,{key:0,legendSet:Ae.value,config:ut.value,onClickMarker:o[4]||(o[4]=({legend:t})=>t.segregate())},{item:C(({legend:t})=>[j("div",{onClick:l=>t.segregate(),style:W(`opacity:${$.value.includes(t.id)?.5:1}`)},M(t.name),13,wa)]),_:1},8,["legendSet","config"])):z(a.$slots,"legend",{key:1,legend:Ae.value},void 0,!0)],512),v.value.end-v.value.start<200?(r(),Z(Pt,{key:5,hideDetails:"",config:{open:w.value.showTable,maxHeight:1e4,body:{backgroundColor:e.value.style.chart.backgroundColor,color:e.value.style.chart.color},head:{backgroundColor:e.value.style.chart.backgroundColor,color:e.value.style.chart.color}}},{content:C(()=>[ie(At,{colNames:le.value.colNames,head:le.value.head,body:le.value.body,config:le.value.config,title:`${e.value.style.chart.title.text}${e.value.style.chart.title.subtitle.text?` : ${e.value.style.chart.title.subtitle.text}`:""}`,onClose:o[5]||(o[5]=t=>w.value.showTable=!1)},{th:C(({th:t})=>[j("div",{innerHTML:t},null,8,za)]),td:C(({td:t})=>[Et(M(isNaN(Number(t))?t:L(H)({p:e.value.style.chart.bars.dataLabels.prefix,v:t,s:e.value.style.chart.bars.dataLabels.suffix,r:e.value.table.td.roundingValue})),1)]),_:1},8,["colNames","head","body","config","title"])]),_:1},8,["config"])):c("",!0)],14,Wt))}},ja=Bt(Ca,[["__scopeId","data-v-a4f47dd7"]]);export{ja as default};
