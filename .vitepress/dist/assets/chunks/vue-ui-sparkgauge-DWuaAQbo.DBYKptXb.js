import{o as O,X as V,K as M,q as U,L as K,G as Q,U as E,Q as F,n as X,k as m,b as D}from"../chart.md.hi_nZSnT.js";import{c as _}from"./useNestedProp-S1UXxUgm.CErBICdk.js";import P from"./vue-ui-skeleton-B2sRnIXX.C3JvNOY7.js";import{p as W}from"./PackageVersion-DtnhR89q.DeJ10Meb.js";import{h as s,v as A,p as B,q as S,o as n,c as d,N as y,t as g,e as c,k as r,G as Y,j as v,n as Z,b as H}from"./framework.BaNfDZ-f.js";import"./vue-data-ui-Cp7bO_tj.DKBrIOIj.js";const I=["xmlns","viewBox"],J=["id"],R=["stop-color"],T=["stop-color"],ee=["d","stroke","stroke-linecap"],ae=["d","stroke","stroke-linecap","stroke-dashoffset"],te=["x","y","font-size","fill","font-weight"],re={__name:"vue-ui-sparkgauge",props:{config:{type:Object,default(){return{}}},dataset:{type:Object,default(){return{}}}},setup(j){const l=j,{vue_ui_sparkgauge:G}=O(),p=s(()=>!!l.dataset&&Object.keys(l.dataset).length);A(()=>{k()});function k(){V(l.dataset)?M({componentName:"VueUiSparkgauge",type:"dataset"}):U({datasetObject:l.dataset,requiredAttributes:["value","min","max"]}).forEach(a=>{M({componentName:"VueUiSparkgauge",type:"datasetAttribute",property:a})})}const b=B(K()),e=s({get:()=>h(),set:a=>a});function h(){const a=_({userConfig:l.config,defaultConfig:G});return a.theme?{..._({userConfig:Q.vue_ui_sparkgauge[a.theme]||l.config,defaultConfig:a})}:a}S(()=>l.config,a=>{e.value=h(),k()},{deep:!0});const u=s(()=>({height:e.value.style.height,width:128,base:e.value.style.basePosition})),o=s(()=>{const a=l.dataset.min??0,i=l.dataset.max??0,q=i-a;return{min:a,max:i,diff:q}}),t=B(e.value.style.animation.show?o.value.min:l.dataset.value);S(()=>l.dataset.value,()=>{$(l.dataset.value||0)});const x=s(()=>t.value>o.value.max?o.value.max:t.value<o.value.min?o.value.min:t.value),w=s(()=>o.value.diff/e.value.style.animation.speedMs);A(()=>{$(l.dataset.value||0)});function $(a){function i(){t.value<a?t.value=Math.min(t.value+w.value,a):t.value>a&&(t.value=Math.max(t.value-w.value,a)),t.value!==a&&requestAnimationFrame(i)}i()}const f=s(()=>l.dataset.title??""),C=s(()=>t.value>=0?(x.value-o.value.min)/o.value.diff:(Math.abs(o.value.min)-Math.abs(x.value))/o.value.diff),L=s(()=>E(e.value.style.colors.min,e.value.style.colors.max,o.value.min,o.value.max,t.value)),z=s(()=>e.value.style.dataLabel.autoColor?L.value:e.value.style.dataLabel.color),N=s(()=>e.value.style.track.autoColor?L.value:e.value.style.track.color);return(a,i)=>(n(),d("div",{style:y(`font-family:${e.value.style.fontFamily};width: 100%; background:${e.value.style.background}`)},[e.value.style.title.show&&f.value&&e.value.style.title.position==="top"?(n(),d("div",{key:0,class:"vue-data-ui-sparkgauge-label",style:y(`font-size:${e.value.style.title.fontSize}px;text-align:${e.value.style.title.textAlign};font-weight:${e.value.style.title.bold?"bold":"normal"};color:${e.value.style.title.color}`)},g(f.value),5)):c("",!0),p.value?(n(),d("svg",{key:1,xmlns:r(F),viewBox:`0 0 ${u.value.width} ${u.value.height}`,style:"overflow: visible; background:transparent; width:100%;"},[Y(W),v("defs",null,[v("linearGradient",{id:`gradient_${b.value}`,x1:"-10%",y1:"100%",x2:"110%",y2:"100%"},[v("stop",{offset:"0%","stop-color":e.value.style.colors.min},null,8,R),v("stop",{offset:"100%","stop-color":e.value.style.colors.max},null,8,T)],8,J)]),v("path",{d:`M10 ${u.value.base} A 1 1 0 1 1 118 ${u.value.base}`,stroke:e.value.style.gutter.color,"stroke-width":8,"stroke-linecap":e.value.style.gutter.strokeLinecap,fill:"none"},null,8,ee),C.value!==0?(n(),d("path",{key:0,d:`M10 ${u.value.base} A 1 1 0 1 1 118 ${u.value.base}`,stroke:e.value.style.colors.showGradient?`url(#gradient_${b.value})`:N.value,"stroke-width":8,"stroke-linecap":e.value.style.track.strokeLinecap,fill:"none","stroke-dasharray":169.5,"stroke-dashoffset":169.5-169.5*C.value,class:Z({"vue-ui-sparkgauge-track":e.value.style.animation.show}),style:y(e.value.style.animation.show?`animation: vue-ui-sparkgauge-animation ${e.value.style.animation.speedMs}ms ease-in;`:"")},null,14,ae)):c("",!0),v("text",{"text-anchor":"middle",x:u.value.width/2,y:u.value.base+6+e.value.style.dataLabel.offsetY,"font-size":e.value.style.dataLabel.fontSize,fill:z.value,"font-weight":e.value.style.dataLabel.bold?"bold":"normal"},g(r(X)(e.value.style.dataLabel.formatter,r(m)(t.value),r(D)({p:e.value.style.dataLabel.prefix,v:r(m)(t.value),s:e.value.style.dataLabel.suffix,r:e.value.style.dataLabel.rounding}),{datapoint:r(m)(t.value),color:z.value})),9,te)],8,I)):c("",!0),p.value?c("",!0):(n(),H(P,{key:2,config:{type:"gauge",style:{backgroundColor:e.value.style.background,gauge:{color:"#CCCCCC"}}}},null,8,["config"])),e.value.style.title.show&&f.value&&e.value.style.title.position==="bottom"?(n(),d("div",{key:3,class:"vue-data-ui-sparkgauge-label",style:y(`font-size:${e.value.style.title.fontSize}px;text-align:${e.value.style.title.textAlign};font-weight:${e.value.style.title.bold?"bold":"normal"};font-weight:${e.value.style.title.bold?"bold":"normal"};color:${e.value.style.title.color}`)},g(f.value),5)):c("",!0)],4))}};export{re as default};
