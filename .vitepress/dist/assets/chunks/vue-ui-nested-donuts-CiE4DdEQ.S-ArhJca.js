import{o as je,L as qe,G as Ke,R as Qe,e as H,X as Ze,K as O,a as Je,m as Te,j as ea,g as Pe,b as L,Q as aa,c as ze,Y as la,z as V,P as se,n as B,H as Oe,$ as ta,N as oa,O as sa}from"../chart.md.hi_nZSnT.js";import{O as ua,M as na}from"./useResponsive-NZB-WLRF.DbXjWqi_.js";import{x as ia}from"./Title-DYNLqCCT.D6xZGHSM.js";import{s as ra,i as da}from"./usePrinter-8ofTb2MJ.pt_J2AaR.js";import{W as va}from"./DataTable-DL2agEJ3.DwhyhpBD.js";import{E as ca}from"./Tooltip-CICAYyQj.DC7pN5Ho.js";import{C as ha}from"./Legend-DXLiSLHd.5wpQgPWV.js";import ya from"./vue-ui-skeleton-B2sRnIXX.C3JvNOY7.js";import pa from"./vue-ui-accordion-D_1fE5EF.ggAyum2g.js";import{c as Ve}from"./useNestedProp-S1UXxUgm.CErBICdk.js";import{p as fa}from"./PackageVersion-DtnhR89q.DeJ10Meb.js";import{s as ba}from"./vue-data-ui-Cp7bO_tj.DKBrIOIj.js";import{h as g,p as d,q as Ae,v as ga,Y as ma,o as u,c as n,b as A,e as f,aj as xa,w as m,r as k,ak as j,al as q,k as r,n as z,N as ue,G as De,j as b,F as w,C as F,t as N,a as K,P as $a,am as wa,an as La}from"./framework.BaNfDZ-f.js";import"./Shape-CO_Ak9Zm.UkrUmJI7.js";const ne=D=>(wa("data-v-e05474aa"),D=D(),La(),D),ka=["id"],Ca=["xmlns","viewBox"],Ia=["id"],Fa=ne(()=>b("stop",{offset:"0%","stop-color":"#FFFFFF","stop-opacity":"0"},null,-1)),_a=["offset","stop-color"],Na=["offset","stop-opacity"],Sa=ne(()=>b("stop",{offset:"100%","stop-color":"#FFFFFF","stop-opacity":"0"},null,-1)),Ta=["id"],Pa=["id"],za=ne(()=>b("feColorMatrix",{type:"saturate",values:"0"},null,-1)),Oa=["id"],Va=["flood-color"],Aa=["d","fill","stroke","stroke-width","filter"],Da={key:0},Ga=["d","fill"],Ya={key:1},Ba=["x","y","font-size","font-weight","fill"],Ma={key:2},Ra=["filter"],Ea=["text-anchor","x","y","fill","font-size","font-weight"],Ua=["text-anchor","x","y","fill","font-size","font-weight"],Wa=["text-anchor","x","y","fill","font-size","font-weight"],Xa=["d","fill","onMouseenter","onClick"],Ha={key:3,class:"vue-data-ui-watermark"},ja={key:0,class:"vue-ui-nested-donuts-legend-title"},qa=["onClick"],Ka=["innerHTML"],Qa={__name:"vue-ui-nested-donuts",props:{config:{type:Object,default(){return{}}},dataset:{type:Array,default(){return[]}}},emits:["selectLegend","selectDatapoint"],setup(D,{expose:Ge,emit:ie}){const S=D,{vue_ui_nested_donuts:Ye}=je(),M=g(()=>!!S.dataset&&S.dataset.length),x=d(qe()),Q=d(!1),Z=d(""),Be=d(null),re=d(0),G=d(null),de=d(null),J=d(null),ve=d(0),ce=d(0),he=d(0),Y=d(!1);function Me(a){Y.value=a,re.value+=1}const e=g({get:()=>ye(),set:a=>a});function ye(){const a=Ve({userConfig:S.config,defaultConfig:Ye});return a.theme?{...Ve({userConfig:Ke.vue_ui_nested_donuts[a.theme]||S.config,defaultConfig:a}),customPalette:Qe[a.theme]||H}:a}Ae(()=>S.config,a=>{e.value=ye(),pe(),ve.value+=1,ce.value+=1,he.value+=1},{deep:!0});const R=d(null);ga(()=>{pe()});function pe(){if(Ze(S.dataset)&&O({componentName:"VueUiNestedDonuts",type:"dataset"}),e.value.responsive){const a=ua(()=>{const{width:s,height:t}=na({chart:G.value,title:e.value.style.chart.title.text?de.value:null,legend:e.value.style.chart.legend.show?J.value:null});y.value.width=s,y.value.height=t});R.value=new ResizeObserver(a),R.value.observe(G.value.parentNode)}}ma(()=>{R.value&&R.value.disconnect()});const{isPrinting:fe,isImaging:be,generatePdf:ge,generateImage:me}=ra({elementId:`nested_donuts_${x.value}`,fileName:e.value.style.chart.title.text||"vue-ui-nested-donuts"}),Re=g(()=>Je(e.value.customPalette)),$=d({dataLabels:{show:e.value.style.chart.layout.labels.dataLabels.show},showTable:e.value.table.show,showTooltip:e.value.style.chart.tooltip.show}),y=d({height:512,width:512});function Ee({datapoint:a,index:s}){ie("selectDatapoint",{datapoint:a,index:s})}const p=d([]),C=g(()=>(S.dataset.forEach((a,s)=>{[null,void 0].includes(a.name)&&O({componentName:"VueUiNestedDonuts",type:"datasetSerieAttribute",property:"name",index:s}),[null,void 0].includes(a.series)?O({componentName:"VueUiNestedDonuts",type:"datasetSerieAttribute",property:"series",index:s}):a.series.length===0?O({componentName:"VueUiNestedDonuts",type:"datasetAttributeEmpty",property:`series at index ${s}`}):a.series.forEach((t,o)=>{[null,void 0].includes(t.name)&&O({componentName:"VueUiNestedDonuts",type:"datasetSerieAttribute",property:"name",index:o,key:"serie"}),[null,void 0].includes(t.values)&&O({componentName:"VueUiNestedDonuts",type:"datasetSerieAttribute",property:"values",index:o,key:"serie"})})}),S.dataset.map((a,s)=>({...a,total:a.series.filter(t=>!p.value.includes(t.id)).map(t=>Te(t.values).reduce((o,l)=>o+l,0)).reduce((t,o)=>t+o,0),datasetIndex:s,id:`${x.value}_${s}`,series:a.series.map((t,o)=>({name:t.name,arcOf:a.name,arcOfId:`${x.value}_${s}`,id:`${x.value}_${s}_${o}`,seriesIndex:o,datasetIndex:s,color:ea(t.color)||Re.value[o]||H[o]||H[o%H.length],value:Te(t.values).reduce((l,v)=>l+v,0),absoluteValues:t.values||[]}))})))),I=g(()=>Math.min(y.value.height,y.value.width)*(e.value.style.chart.layout.donut.strokeWidth/512)),xe=g(()=>[...C.value].map((a,s)=>{const t=a.series.filter(o=>!p.value.includes(o.id)).map(o=>o.value).reduce((o,l)=>o+l,0);return{...a,total:t,series:a.series.filter(o=>!p.value.includes(o.id)).map(o=>({...o,proportion:o.value/t}))}}));function Ue(a,s,t){let o=0;for(let l=0;l<a.length;l+=1)t.includes(a[l])&&(o+=1);return o<s}const c=d(xe.value);Ae(()=>xe.value,a=>c.value=a);const $e=d(null),we=d(null);function ee(a){ie("selectLegend",a);const s=C.value.flatMap(i=>i.series).find(i=>i.id===a.id),t=c.value.flatMap(i=>i.series).find(i=>i.id===a.id);let o=t?t.value:0;const l=C.value.find(i=>i.id===s.arcOfId).series.map(i=>i.id),v=Ue(l,l.length-1,p.value);if(p.value.includes(a.id)){let i=function(){o>s.value?(cancelAnimationFrame($e.value),c.value=c.value.map(h=>({...h,series:h.series.map(_=>_.id==a.id?{..._,value:s.value}:_)}))):(o+=s.value*.025,c.value=c.value.map(h=>({...h,series:h.series.map(_=>_.id===a.id?{..._,value:o}:_)})),$e.value=requestAnimationFrame(i))};p.value=p.value.filter(h=>h!==a.id),i()}else if(v){let i=function(){o<.1?(cancelAnimationFrame(we.value),p.value.push(a.id),c.value=c.value.map((h,_)=>({...h,series:h.series.map(P=>P.id===a.id?{...P,value:0}:P)}))):(o/=1.1,c.value=c.value.map((h,_)=>({...h,series:h.series.map(P=>P.id===a.id?{...P,value:o}:P)})),we.value=requestAnimationFrame(i))};i()}}const ae=g(()=>I.value/C.value.length*e.value.style.chart.layout.donut.spacingRatio),Le=g(()=>c.value.map((a,s)=>I.value-s*I.value/C.value.length)),E=g(()=>c.value.map((a,s)=>{const t=s*I.value/C.value.length;return{...a,radius:I.value-t,donut:Pe({series:a.series},y.value.width/2,y.value.height/2,I.value-t,I.value-t,1.99999,2,1,360,105.25,ae.value)}})),ke=g(()=>[...C.value].map((a,s)=>{const t=s*I.value/C.value.length;return{sizeRatio:t,donut:Pe({series:[{value:1}]},y.value.width/2,y.value.height/2,I.value-t,I.value-t,1.99999,2,1,360,105.25,I.value/C.value.length*e.value.style.chart.layout.donut.spacingRatio)[0]}})),Ce=d(null),U=d(null),W=d(null),le=d(null);function We({datapoint:a,_relativeIndex:s,seriesIndex:t}){Ce.value=a.arcOfId,U.value=a.id,W.value=t,le.value={datapoint:a,seriesIndex:t,series:c.value,config:e.value};const o=e.value.style.chart.tooltip.customFormat;if(Oe(o)&&ta(()=>o({seriesIndex:t,datapoint:a,series:c.value,config:e.value})))Z.value=o({seriesIndex:t,datapoint:a,series:c.value,config:e.value});else{let l="";if(e.value.style.chart.tooltip.showAllItemsAtIndex&&p.value.length===0){const v=c.value.map(i=>i.series.find(h=>h.seriesIndex===t));v.forEach((i,h)=>{if(!i)return"";l+=`
                    <div style="display:flex; flex-direction: column; justify-content:flex-start; align-items:flex-start;padding:6px 0; ${h<v.length-1?`border-bottom:1px solid ${e.value.style.chart.tooltip.borderColor}`:""}">
                        <div style="display:flex; flex-direction: row; gap: 3px; justify-content:flex-start; align-items:center;">
                            <svg viewBox="0 0 20 20" height="${e.value.style.chart.tooltip.fontSize}" width="${e.value.style.chart.tooltip.fontSize}">
                                <circle cx="10" cy="10" r="10" fill="${i.color}"/>
                            </svg>
                            <span>
                                ${i.arcOf??""} - ${i.name}
                            </span>
                        </div>
                        <span>
                            ${e.value.style.chart.tooltip.showValue?`<b>${B(e.value.style.chart.layout.labels.dataLabels.formatter,a.value,L({p:e.value.style.chart.layout.labels.dataLabels.prefix,v:a.value,s:e.value.style.chart.layout.labels.dataLabels.suffix,r:e.value.style.chart.tooltip.roundingValue}),{datapoint:a,seriesIndex:t})}
                        </b>`:""}
                            ${e.value.style.chart.tooltip.showPercentage?`(${L({v:i.proportion*100,s:"%",r:e.value.style.chart.tooltip.roundingPercentage})})`:""}
                        </span>
                    </div>
                `})}else l+=`<div style="width:100%;text-align:center;border-bottom:1px solid ${e.value.style.chart.tooltip.borderColor};padding-bottom:6px;margin-bottom:3px;">${a.arcOf??""} - ${a.name}</div>`,l+=`<div style="display:flex;flex-direction:row;gap:6px;align-items:center;"><svg viewBox="0 0 12 12" height="14" width="14"><circle cx="6" cy="6" r="6" stroke="none" fill="${a.color}"/></svg>`,e.value.style.chart.tooltip.showValue&&(l+=`<b>${B(e.value.style.chart.layout.labels.dataLabels.formatter,a.value,L({p:e.value.style.chart.layout.labels.dataLabels.prefix,v:a.value,s:e.value.style.chart.layout.labels.dataLabels.suffix,r:e.value.style.chart.tooltip.roundingValue}),{datapoint:a,seriesIndex:t})}</b>`),e.value.style.chart.tooltip.showPercentage&&(e.value.style.chart.tooltip.showValue?l+=`<span>(${L({v:a.proportion*100,s:"%",r:e.value.style.chart.tooltip.roundingPercentage})})</span></div>`:l+=`<b>${L({v:a.proportion*100,s:"%",r:e.value.style.chart.tooltip.roundingPercentage})}</b></div>`);Z.value=`<div style="font-size:${e.value.style.chart.tooltip.fontSize}px">${l}</div>`}Q.value=!0}function te(a){return a.proportion*100>e.value.style.chart.layout.labels.dataLabels.hideUnderValue}function Ie(a,s){if(!e.value.useBlurOnHover)return"";if(e.value.style.chart.tooltip.showAllItemsAtIndex&&p.value.length===0)return[null,void 0].includes(W.value)||W.value===s?"":`url(#blur_${x.value})`;if(!e.value.style.chart.tooltip.showAllItemsAtIndex||p.value.length)return[null,void 0].includes(U.value)||U.value===a.id?"":`url(#blur_${x.value})`}const oe=g(()=>C.value.map((a,s)=>a.series.map((t,o)=>({name:t.name,color:t.color,value:t.value,shape:"circle",arcOf:t.arcOf,id:t.id,seriesIndex:o,datasetIndex:s,total:a.series.filter(l=>!p.value.includes(l.id)).map(l=>l.value).reduce((l,v)=>l+v,0)})).map(t=>({...t,opacity:p.value.includes(t.id)?.5:1,segregate:()=>ee(t),isSegregated:p.value.includes(t.id)})))),Xe=g(()=>({cy:"nested-donuts-legend",backgroundColor:e.value.style.chart.legend.backgroundColor,color:e.value.style.chart.legend.color,fontSize:e.value.style.chart.legend.fontSize,paddingBottom:12,fontWeight:e.value.style.chart.legend.bold?"bold":""})),T=g(()=>{const a=c.value.flatMap(t=>t.series.map(o=>({name:`${t.name} - ${o.name}`,color:o.color,total:t.total}))),s=c.value.flatMap(t=>t.series.map(o=>o.value));return{head:a,body:s}});function Fe(){$a(()=>{const a=T.value.head.map((o,l)=>[[o.name],[T.value.body[l]],[isNaN(T.value.body[l]/o.total)?"-":T.value.body[l]/o.total*100]]),s=[[e.value.style.chart.title.text],[e.value.style.chart.title.subtitle.text],[[""],["val"],["%"]]].concat(a),t=oa(s);sa({csvContent:t,title:e.value.style.chart.title.text||"vue-ui-nested-donuts"})})}const X=g(()=>{const a=[e.value.table.columnNames.series,e.value.table.columnNames.value,e.value.table.columnNames.percentage],s=T.value.head.map((o,l)=>{const v=L({p:e.value.style.chart.layout.labels.dataLabels.prefix,v:T.value.body[l],s:e.value.style.chart.layout.labels.dataLabels.suffix,r:e.value.table.td.roundingValue});return[{color:o.color,name:o.name},v,isNaN(T.value.body[l]/o.total)?"-":L({v:T.value.body[l]/o.total*100,s:"%",r:e.value.table.td.roundingPercentage})]}),t={th:{backgroundColor:e.value.table.th.backgroundColor,color:e.value.table.th.color,outline:e.value.table.th.outline},td:{backgroundColor:e.value.table.td.backgroundColor,color:e.value.table.td.color,outline:e.value.table.td.outline},breakpoint:e.value.table.responsiveBreakpoint};return{colNames:[e.value.table.columnNames.series,e.value.table.columnNames.value,e.value.table.columnNames.percentage],head:a,body:s,config:t}});function He(){return C.value}function _e(){$.value.showTable=!$.value.showTable}function Ne(){$.value.dataLabels.show=!$.value.dataLabels.show}function Se(){$.value.showTooltip=!$.value.showTooltip}return Ge({getData:He,generatePdf:ge,generateCsv:Fe,generateImage:me,toggleTable:_e,toggleLabels:Ne,toggleTooltip:Se}),(a,s)=>(u(),n("div",{ref_key:"nestedDonutsChart",ref:G,class:z(`vue-ui-nested-donuts ${Y.value?"vue-data-ui-wrapper-fullscreen":""} ${e.value.useCssAnimation?"":"vue-ui-dna"}`),style:ue(`font-family:${e.value.style.fontFamily};width:100%; text-align:center;${!e.value.style.chart.title.text&&e.value.userOptions.show?"padding-top:36px":""};background:${e.value.style.chart.backgroundColor}`),id:`nested_donuts_${x.value}`},[e.value.style.chart.title.text?(u(),n("div",{key:0,ref_key:"chartTitle",ref:de},[(u(),A(ia,{key:`title_${ve.value}`,config:{title:{cy:"donut-div-title",...e.value.style.chart.title},subtitle:{cy:"donut-div-subtitle",...e.value.style.chart.title.subtitle}}},null,8,["config"]))],512)):f("",!0),e.value.userOptions.show&&M.value?(u(),A(da,{ref:"details",key:`user_option_${re.value}`,backgroundColor:e.value.style.chart.backgroundColor,color:e.value.style.chart.color,isPrinting:r(fe),isImaging:r(be),uid:x.value,hasTooltip:e.value.userOptions.buttons.tooltip&&e.value.style.chart.tooltip.show,hasPdf:e.value.userOptions.buttons.pdf,hasXls:e.value.userOptions.buttons.csv,hasImg:e.value.userOptions.buttons.img,hasTable:e.value.userOptions.buttons.table,hasLabel:e.value.userOptions.buttons.labels,hasFullscreen:e.value.userOptions.buttons.fullscreen,isFullscreen:Y.value,isTooltip:$.value.showTooltip,titles:{...e.value.userOptions.buttonTitles},chartElement:G.value,position:e.value.userOptions.position,onToggleFullscreen:Me,onGeneratePdf:r(ge),onGenerateCsv:Fe,onGenerateImage:r(me),onToggleTable:_e,onToggleLabels:Ne,onToggleTooltip:Se},xa({_:2},[a.$slots.optionTooltip?{name:"optionTooltip",fn:m(()=>[k(a.$slots,"optionTooltip",{},void 0,!0)]),key:"0"}:void 0,a.$slots.optionPdf?{name:"optionPdf",fn:m(()=>[k(a.$slots,"optionPdf",{},void 0,!0)]),key:"1"}:void 0,a.$slots.optionCsv?{name:"optionCsv",fn:m(()=>[k(a.$slots,"optionCsv",{},void 0,!0)]),key:"2"}:void 0,a.$slots.optionImg?{name:"optionImg",fn:m(()=>[k(a.$slots,"optionImg",{},void 0,!0)]),key:"3"}:void 0,a.$slots.optionTable?{name:"optionTable",fn:m(()=>[k(a.$slots,"optionTable",{},void 0,!0)]),key:"4"}:void 0,a.$slots.optionLabels?{name:"optionLabels",fn:m(()=>[k(a.$slots,"optionLabels",{},void 0,!0)]),key:"5"}:void 0,a.$slots.optionFullscreen?{name:"optionFullscreen",fn:m(({toggleFullscreen:t,isFullscreen:o})=>[k(a.$slots,"optionFullscreen",j(q({toggleFullscreen:t,isFullscreen:o})),void 0,!0)]),key:"6"}:void 0]),1032,["backgroundColor","color","isPrinting","isImaging","uid","hasTooltip","hasPdf","hasXls","hasImg","hasTable","hasLabel","hasFullscreen","isFullscreen","isTooltip","titles","chartElement","position","onGeneratePdf","onGenerateImage"])):f("",!0),M.value?(u(),n("svg",{key:2,xmlns:r(aa),class:z({"vue-data-ui-fullscreen--on":Y.value,"vue-data-ui-fulscreen--off":!Y.value}),viewBox:`0 0 ${y.value.width<=0?.001:y.value.width} ${y.value.height<0?.001:y.value.height}`,style:ue(`max-width:100%; overflow: visible; background:transparent;color:${e.value.style.chart.color}`)},[De(fa),b("defs",null,[(u(!0),n(w,null,F(ke.value,(t,o)=>(u(),n("radialGradient",{id:`radial_${x.value}_${o}`},[Fa,b("stop",{offset:`${(1-ae.value/Le.value[o])*100}%`,"stop-color":r(ze)("#FFFFFF",0),"stop-opacity":"0"},null,8,_a),b("stop",{offset:`${(1-ae.value/Le.value[o]/2)*100}%`,"stop-color":"#FFFFFF","stop-opacity":e.value.style.chart.gradientIntensity/100},null,8,Na),Sa],8,Ia))),256))]),b("defs",null,[b("filter",{id:`blur_${x.value}`,x:"-50%",y:"-50%",width:"200%",height:"200%"},[b("feGaussianBlur",{in:"SourceGraphic",stdDeviation:2,id:`blur_std_${x.value}`},null,8,Pa),za],8,Ta),b("filter",{id:`shadow_${x.value}`,"color-interpolation-filters":"sRGB"},[b("feDropShadow",{dx:"0",dy:"0",stdDeviation:"10","flood-opacity":"0.5","flood-color":e.value.style.chart.layout.donut.shadowColor},null,8,Va)],8,Oa)]),(u(!0),n(w,null,F(E.value,(t,o)=>(u(),n("g",null,[(u(!0),n(w,null,F(t.donut,(l,v)=>(u(),n("g",null,[b("path",{class:"vue-ui-donut-arc-path",d:l.arcSlice,fill:r(ze)(l.color,80),stroke:e.value.style.chart.backgroundColor,"stroke-width":e.value.style.chart.layout.donut.borderWidth,filter:Ie(l,v)},null,8,Aa)]))),256))]))),256)),e.value.style.chart.useGradient?(u(),n("g",Da,[(u(!0),n(w,null,F(ke.value,(t,o)=>(u(),n("g",null,[b("path",{d:t.donut.arcSlice,fill:`url(#radial_${x.value}_${o})`,stroke:"transparent","stroke-width":"0"},null,8,Ga)]))),256))])):f("",!0),e.value.style.chart.layout.labels.dataLabels.showDonutName?(u(),n("g",Ya,[(u(!0),n(w,null,F(E.value,(t,o)=>(u(),n("g",null,[(u(!0),n(w,null,F(t.donut,(l,v)=>(u(),n("g",null,[v===0&&y.value.width&&y.value.height?(u(),n("text",{key:0,class:z({animated:e.value.useCssAnimation}),x:y.value.width/2,y:l.startY-e.value.style.chart.layout.labels.dataLabels.fontSize+e.value.style.chart.layout.labels.dataLabels.donutNameOffsetY,"text-anchor":"middle","font-size":e.value.style.chart.layout.labels.dataLabels.fontSize,"font-weight":e.value.style.chart.layout.labels.dataLabels.boldDonutName?"bold":"normal",fill:e.value.style.chart.layout.labels.dataLabels.color},N(e.value.style.chart.layout.labels.dataLabels.donutNameAbbreviation?r(la)({source:t.name,length:e.value.style.chart.layout.labels.dataLabels.donutNameMaxAbbreviationSize}):t.name),11,Ba)):f("",!0)]))),256))]))),256))])):f("",!0),e.value.style.chart.layout.labels.dataLabels.show?(u(),n("g",Ma,[(u(!0),n(w,null,F(E.value,(t,o)=>(u(),n("g",null,[(u(!0),n(w,null,F(t.donut,(l,v)=>(u(),n("g",{filter:Ie(l,v)},[te(l)&&$.value.dataLabels.show&&e.value.style.chart.layout.labels.dataLabels.showPercentage?(u(),n("text",{key:0,class:z({animated:e.value.useCssAnimation}),"text-anchor":r(V)(l,!0).anchor,x:r(V)(l,!1,e.value.style.chart.layout.labels.dataLabels.offsetX).x||0,y:r(se)(l,e.value.style.chart.layout.labels.dataLabels.offsetY,e.value.style.chart.layout.labels.dataLabels.offsetY),fill:e.value.style.chart.layout.labels.dataLabels.useSerieColor?l.color:e.value.style.chart.layout.labels.dataLabels.color,"font-size":e.value.style.chart.layout.labels.dataLabels.fontSize,"font-weight":e.value.style.chart.layout.labels.dataLabels.boldPercentage?"bold":"normal"},N(r(L)({v:l.proportion*100,s:"%",r:e.value.style.chart.layout.labels.dataLabels.roundingPercentage})),11,Ea)):f("",!0),te(l)&&$.value.dataLabels.show&&e.value.style.chart.layout.labels.dataLabels.showPercentage&&e.value.style.chart.layout.labels.dataLabels.showValue?(u(),n("text",{key:1,class:z({animated:e.value.useCssAnimation}),"text-anchor":r(V)(l,!0).anchor,x:r(V)(l,!1,e.value.style.chart.layout.labels.dataLabels.offsetX).x||0,y:r(se)(l,e.value.style.chart.layout.labels.dataLabels.offsetY,e.value.style.chart.layout.labels.dataLabels.offsetY)+e.value.style.chart.layout.labels.dataLabels.fontSize,fill:e.value.style.chart.layout.labels.dataLabels.useSerieColor?l.color:e.value.style.chart.layout.labels.dataLabels.color,"font-size":e.value.style.chart.layout.labels.dataLabels.fontSize,"font-weight":e.value.style.chart.layout.labels.dataLabels.boldValue?"bold":"normal"}," ("+N(r(B)(e.value.style.chart.layout.labels.dataLabels.formatter,l.value,r(L)({p:e.value.style.chart.layout.labels.dataLabels.prefix,v:l.value,s:e.value.style.chart.layout.labels.dataLabels.suffix,r:e.value.style.chart.layout.labels.dataLabels.roundingValue}),{datapoint:l,seriesIndex:o,datapointIndex:v}))+") ",11,Ua)):f("",!0),te(l)&&$.value.dataLabels.show&&!e.value.style.chart.layout.labels.dataLabels.showPercentage&&e.value.style.chart.layout.labels.dataLabels.showValue?(u(),n("text",{key:2,class:z({animated:e.value.useCssAnimation}),"text-anchor":r(V)(l,!0).anchor,x:r(V)(l,!1,e.value.style.chart.layout.labels.dataLabels.offsetX).x||0,y:r(se)(l,e.value.style.chart.layout.labels.dataLabels.offsetY,e.value.style.chart.layout.labels.dataLabels.offsetY),fill:e.value.style.chart.layout.labels.dataLabels.useSerieColor?l.color:e.value.style.chart.layout.labels.dataLabels.color,"font-size":e.value.style.chart.layout.labels.dataLabels.fontSize,"font-weight":e.value.style.chart.layout.labels.dataLabels.boldValue?"bold":"normal"},N(r(B)(e.value.style.chart.layout.labels.dataLabels.formatter,l.value,r(L)({p:e.value.style.chart.layout.labels.dataLabels.prefix,v:l.value,s:e.value.style.chart.layout.labels.dataLabels.suffix,r:e.value.style.chart.layout.labels.dataLabels.roundingValue}),{datapoint:l,seriesIndex:o,datapointIndex:v})),11,Wa)):f("",!0)],8,Ra))),256))]))),256))])):f("",!0),(u(!0),n(w,null,F(E.value,(t,o)=>(u(),n("g",null,[(u(!0),n(w,null,F(t.donut,(l,v)=>(u(),n("g",null,[b("path",{"data-cy-donut-trap":"",d:l.arcSlice,fill:Be.value===o?"rgba(0,0,0,0.1)":"transparent",onMouseenter:i=>We({datapoint:l,relativeIndex:o,seriesIndex:l.seriesIndex}),onClick:i=>Ee({datapoint:l,index:v}),onMouseleave:s[0]||(s[0]=i=>{Q.value=!1,Ce.value=null,U.value=null,W.value=null})},null,40,Xa)]))),256))]))),256)),k(a.$slots,"svg",{svg:y.value},void 0,!0)],14,Ca)):f("",!0),a.$slots.watermark?(u(),n("div",Ha,[k(a.$slots,"watermark",j(q({isPrinting:r(fe)||r(be)})),void 0,!0)])):f("",!0),M.value?f("",!0):(u(),A(ya,{key:4,config:{type:"donut",style:{backgroundColor:e.value.style.chart.backgroundColor,donut:{color:"#CCCCCC"}}}},null,8,["config"])),De(ca,{show:$.value.showTooltip&&Q.value,backgroundColor:e.value.style.chart.tooltip.backgroundColor,color:e.value.style.chart.tooltip.color,borderRadius:e.value.style.chart.tooltip.borderRadius,borderColor:e.value.style.chart.tooltip.borderColor,borderWidth:e.value.style.chart.tooltip.borderWidth,fontSize:e.value.style.chart.tooltip.fontSize,backgroundOpacity:e.value.style.chart.tooltip.backgroundOpacity,position:e.value.style.chart.tooltip.position,offsetY:e.value.style.chart.tooltip.offsetY,parent:G.value,content:Z.value,isCustom:r(Oe)(e.value.style.chart.tooltip.customFormat)},{"tooltip-before":m(()=>[k(a.$slots,"tooltip-before",j(q({...le.value})),void 0,!0)]),"tooltip-after":m(()=>[k(a.$slots,"tooltip-after",j(q({...le.value})),void 0,!0)]),_:3},8,["show","backgroundColor","color","borderRadius","borderColor","borderWidth","fontSize","backgroundOpacity","position","offsetY","parent","content","isCustom"]),e.value.style.chart.legend.show?(u(),n("div",{key:5,ref_key:"chartLegend",ref:J,class:z({"vue-ui-nested-donuts-legend":oe.value.length>1})},[(u(!0),n(w,null,F(oe.value,(t,o)=>(u(),A(ha,{key:`legend_${o}_${he.value}`,legendSet:t,config:Xe.value,onClickMarker:s[1]||(s[1]=({legend:l})=>ee(l))},{legendTitle:m(({titleSet:l})=>[l[0]&&l[0].arcOf?(u(),n("div",ja,N(l[0].arcOf),1)):f("",!0)]),item:m(({legend:l,index:v})=>[b("div",{onClick:i=>ee(l),style:ue(`opacity:${p.value.includes(l.id)?.5:1}`)},[K(N(l.name)+": "+N(r(B)(e.value.style.chart.layout.labels.dataLabels.formatter,l.value,r(L)({p:e.value.style.chart.layout.labels.dataLabels.prefix,v:l.value,s:e.value.style.chart.layout.labels.dataLabels.suffix,r:e.value.style.chart.legend.roundingValue}),{datapoint:l,seriesIndex:v}))+" ",1),p.value.includes(l.id)?(u(),n(w,{key:1},[K(" ( - % ) ")],64)):(u(),n(w,{key:0},[K(" ("+N(isNaN(l.value/l.total)?"-":r(L)({v:l.value/l.total*100,s:"%",r:e.value.style.chart.legend.roundingPercentage}))+") ",1)],64))],12,qa)]),_:2},1032,["legendSet","config"]))),128))],2)):f("",!0),e.value.style.chart.legend.show?f("",!0):(u(),n("div",{key:6,ref_key:"chartLegend",ref:J},[k(a.$slots,"legend",{legend:oe.value},void 0,!0)],512)),M.value?(u(),A(pa,{key:7,hideDetails:"",config:{open:$.value.showTable,maxHeight:1e4,body:{backgroundColor:e.value.style.chart.backgroundColor,color:e.value.style.chart.color},head:{backgroundColor:e.value.style.chart.backgroundColor,color:e.value.style.chart.color}}},{content:m(()=>[(u(),A(va,{key:`table_${ce.value}`,colNames:X.value.colNames,head:X.value.head,body:X.value.body,config:X.value.config,title:`${e.value.style.chart.title.text}${e.value.style.chart.title.subtitle.text?` : ${e.value.style.chart.title.subtitle.text}`:""}`,onClose:s[2]||(s[2]=t=>$.value.showTable=!1)},{th:m(({th:t})=>[b("div",{innerHTML:t,style:{display:"flex","align-items":"center"}},null,8,Ka)]),td:m(({td:t})=>[K(N(t.name||t),1)]),_:1},8,["colNames","head","body","config","title"]))]),_:1},8,["config"])):f("",!0)],14,ka))}},cl=ba(Qa,[["__scopeId","data-v-e05474aa"]]);export{cl as default};
